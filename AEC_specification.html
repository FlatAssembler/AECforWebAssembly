<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>AEC Language Specification</title>
    <meta
      name="description"
      content="Documentation for the ArithmeticExpressionCompiler programming language"
    />
    <meta name="author" content="Teo Samaržija" />
    <meta
      name="keywords"
      content="HTML, CSS, JavaScript, WebAssembly, Programming Language"
    />
    <style type="text/css">
      title {
        font-family: "Courier New", monospace;
      }
      body {
        background-image: url("background.jpg");
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-size: cover;
      }
      header {
        height: 200px;
        line-height: 200px;
        text-align: center;
        color: darkblue;
        font-weight: bold;
        font-size: 36px;
        font-family: Lucida;
      }
      aside {
        width: 25%;
        background: #aaaaff;
        height: 100%;
        float: left;
        color: #aa4400;
        overflow: auto;
      }
      aside a {
        text-decoration: none;
      }
      section {
        width: 25%;
        background: #ffffaa;
        height: 100%;
        float: right;
        color: purple;
        text-align: center;
        overflow: auto;
      }
      .main1 {
        background: black;
        color: darkgray;
        width: 50%;
        height: 100%;
        overflow: auto;
        font-family: Verdana;
      }
      .main1 table,
      .main1 th,
      .main1 td {
        color: darkgray;
        border: 1px solid darkgray;
      }
      .main1 a {
        color: lightgreen;
      }
      .main2 {
        background: black;
        color: lightgreen;
        width: 50%;
        height: 100%;
        overflow: auto;
      }
      .main2 table,
      .main2 th,
      .main2 td {
        border: 1px solid lightgreen;
        color: lightgreen;
      }
      .main2 a {
        color: #00ffff;
      }
      .main3 {
        background: #eeeeee;
        color: #333333;
        width: 50%;
        height: 100%;
        overflow: auto;
        font-family: Arial;
      }
      .main3 a {
        color: #00aaaa;
      }
      .main3 table,
      .main3 th,
      .main3 td {
        border: 1px solid #333333;
        color: #333333;
      }
      .main1 .inline_code,
      .main2 .inline_code {
        background-color: #333333;
      }
      .main3 .inline_code {
        background-color: #bbbbbb;
      }
      .link1 {
        text-decoration: none;
        background: linear-gradient(to right, #111111, #333333);
        height: 30px;
        width: 100%;
        color: #ff3300;
        line-height: 30px;
        text-indent: 10px;
        font-family: Verdana;
        text-indent: 5px;
      }
      .popup {
        display: none;
        background: black;
        font-size: 14px;
        line-height: 18px;
        color: white;
        opacity: 0.75;
        position: absolute;
        left: 25%;
        border-width: 7px;
        border-style: solid;
        border-color: black;
        max-width: 200px;
        text-indent: 0px;
      }
      .popup::before {
        content: " ";
      }
      .link1:hover {
        background: darkGray;
        color: black;
      }
      .link1:hover .popup {
        display: block;
      }
      .link2 {
        background: linear-gradient(to right, #333333, #111111);
        color: #ff3300;
      }
      footer {
        width: 100%;
        height: 50px;
        /*background: #aaffaa;*/
        text-align: center;
        color: #007777;
        line-height: 50px;
      }
      pre {
        overflow: scroll;
        color: lightGreen;
        font-size: 1em;
        font-family: "Lucida Console", "Courier New", Courier, monospace;
        background: #111111;
        text-align: left;
        margin-top: 3px;
        margin-bottom: 3px;
        padding: 3px;
      }
      .inline_code {
        font-family: "Lucida Console", "Courier New", Courier, monospace;
        font-weight: bold;
        font-style: normal;
      }
      table {
        width: 100%;
        border-collapse: collapse;
      }
      .quotation {
        margin-top: 5px;
        margin-bottom: 5px;
        display: block;
        font-family: Times;
        padding-left: 10px;
        padding-right: 10px;
        padding-bottom: 5px;
        padding-top: 5px;
        background: #ffffdd;
        color: black;
      }
      .quotation .quotation {
        background: #cccc00;
      }
      .quotation .quotation .quotation {
        background: #aaaa00;
      }
      .quotation .inline_code {
        background: #ffee00;
      }
      .formula {
        background: white;
        color: black;
        font-family: Times;
        padding: 3px;
        margin-top: 3px;
        margin-bottom: 3px;
        text-align: center;
        white-space: nowrap;
        overflow-x: scroll;
      }
      ol ol {
        list-style-type: lower-alpha;
      }
      .LinuxShell a {
        color: #00aaaa;
      }
      /* Generated by VIM */
      .Constant {
        font-weight: bold;
        color: #ffa0a0;
      }
      .Statement {
        color: #f0e68c;
        font-weight: bold;
      }
      .Type {
        color: #bdb76b;
        font-weight: bold;
      }
      .Comment {
        font-weight: bold;
        color: #eeffff;
      }
      .Keyword {
        font-weight: bold;
        color: #ffccaa;
      }
      .Operator {
        font-weight: bold;
        color: #ffaaff;
      }
      .String {
        color: #ffaa77;
      }
      .Parenthesis {
        color: #aaaaff;
        font-weight: bold;
      }
      /* Generated by Notepad++ */
      .sc2 {
        color: #ff8000;
      }
      .sc4 {
        font-weight: bold;
        color: #ffff80;
      }
      .sc6 {
        font-weight: bold;
        color: #4040ff;
      }
      .sc8 {
        font-weight: bold;
        color: #8080ff;
      }
      .sc9 {
        font-weight: bold;
        color: #ff7777;
      }
    </style>
  </head>
  <body>
    <noscript>
      <img
        src="gornjiLijevi.svg"
        style="
          position: absolute;
          left: 8px;
          width: 25%;
          height: 200px;
          top: 8px;
          -webkit-animation-name: animacija;
          -webkit-animation-duration: 2s;
        "
      />
      <img
        src="gornjiDesni.svg"
        style="
          position: absolute;
          width: 25%;
          height: 200px;
          left: -webkit-calc(75% - 8px);
          left: calc(75% - 8px);
          top: 8px;
          -webkit-animation-name: animacija;
          -webkit-animation-duration: 2s;
        "
      />
      <img
        src="donjiLijevi.svg"
        style="
          position: absolute;
          width: 25%;
          height: 50px;
          left: 8px;
          top: calc(100% + 200px - 8px);
          top: -webkit-calc(100% + 200px - 8px);
          -webkit-animation-name: animacija;
          -webkit-animation-duration: 2s;
        "
      />
      <div
        style="
          position: absolute;
          top: -webkit-calc(100% + 200px + 50px + 8px);
          top: calc(100% + 200px + 50px + 8px);
          width: 100%;
          height: 50px;
          font-size: 36px;
          font-family: Arial;
          text-align: center;
          background: #333333;
          color: #aaaaaa;
          line-height: 50px;
        "
      >
        Please enable JavaScript!
      </div>
    </noscript>
    <header>
      <svg
        id="gornjiLijevi"
        style="overflow: hidden; float: left; width: 25%; height: 200px"
      ></svg>
      <svg
        id="gornjiDesni"
        style="overflow: hidden; float: right; width: 25%; height: 200px"
      ></svg>
      <div
        style="background: #ffaaaa; float: right; width: 50%; height: 100%"
        id="naslov"
      >
        <div
          style="
            position: relative;
            top: 50%;
            -webkit-transform: translate(0, -50%);
            transform: translate(0, -50%);
          "
          id="titleContainer"
        >
          AEC specification
        </div>
      </div>
      <script type="text/javascript">
        var svgNS = "http://www.w3.org/2000/svg";
        function nacrtajRubove() {
          var crtanje = document.getElementById("gornjiLijevi");
          while (crtanje.childNodes.length)
            crtanje.removeChild(crtanje.childNodes[0]);
          var visina = crtanje.clientHeight;
          var sirina = crtanje.clientWidth;
          if (!visina || !sirina) {
            visina = crtanje.parentNode.clientHeight;
            sirina = crtanje.parentNode.clientWidth / 4;
          }
          var elipsa = document.createElementNS(svgNS, "ellipse");
          elipsa.setAttribute("cx", sirina);
          elipsa.setAttribute("cy", visina);
          elipsa.setAttribute("rx", sirina);
          elipsa.setAttribute("ry", visina);
          elipsa.setAttribute("fill", "#ffaaff");
          crtanje.appendChild(elipsa);
          for (var i = 0; i < 30; i++) {
            var kut1 = (270 + i * 3) / 57.3;
            var kut2 = (274 + i * 3) / 57.3;
            var x1 = Math.round(sirina - Math.cos(kut1) * sirina);
            var x2 = Math.round(sirina - Math.cos(kut2) * sirina);
            var y1 = Math.round(visina + Math.sin(kut1) * visina);
            var y2 = Math.round(visina + Math.sin(kut2) * visina);
            var trokut = document.createElementNS(svgNS, "polygon");
            trokut.setAttribute(
              "points",
              x1 + "," + y1 + " " + x2 + "," + y2 + " " + sirina + "," + visina
            );
            trokut.setAttribute(
              "fill",
              "rgb(" +
                Math.round(255 - i * 2.83) +
                ",170," +
                Math.round(170 + i * 2.83) +
                ")"
            );
            crtanje.appendChild(trokut);
          }
          crtanje = document.getElementById("gornjiDesni");
          while (crtanje.childNodes.length)
            crtanje.removeChild(crtanje.childNodes[0]);
          var elipsa = document.createElementNS(svgNS, "ellipse");
          elipsa.setAttribute("cx", 0);
          elipsa.setAttribute("cy", visina);
          elipsa.setAttribute("rx", sirina);
          elipsa.setAttribute("ry", visina);
          elipsa.setAttribute("fill", "#ffffaa");
          crtanje.appendChild(elipsa);
          for (var i = 0; i < 30; i++) {
            var kut1 = (i * 3) / 57.3;
            var kut2 = (4 + i * 3) / 57.3;
            var x1 = Math.round(Math.cos(kut1) * sirina);
            var x2 = Math.round(Math.cos(kut2) * sirina);
            var y1 = Math.round(visina - Math.sin(kut1) * visina);
            var y2 = Math.round(visina - Math.sin(kut2) * visina);
            var trokut = document.createElementNS(svgNS, "polygon");
            trokut.setAttribute(
              "points",
              x1 + "," + y1 + " " + x2 + "," + y2 + " 0," + visina
            );
            trokut.setAttribute(
              "fill",
              "rgb(255," + Math.round(255 - i * 2.83) + ",170)"
            );
            crtanje.appendChild(trokut);
          }
        }
        nacrtajRubove();
        window.addEventListener("resize", nacrtajRubove);
      </script>
    </header>
    <aside>
      <br />
      <center><b>Here are my online publications:</b></center>
      <br />
      <b style="margin-left: 5px">HTML5 stuff:</b>
      <a href="sat.html"
        ><div class="link1">
          <div class="popup">
            A simple "grandfather clock" animation made in Javascript.
          </div>
          Analog Clock
        </div></a
      >
      <a href="calculator.html"
        ><div class="link2 link1">
          <div class="popup">
            A simple HTML5 online calculator. Can solve parentheses!
          </div>
          Calculator
        </div></a
      >
      <a href="fraktal.html"
        ><div class="link1">
          <div class="popup">
            A spiral fractal I've made by modifying the "Dragon Curve".
          </div>
          The Dragon Curve
        </div></a
      >
      <a href="pacman.html"
        ><div class="link2 link1">
          <div class="popup">
            A Pacman game playable on touch screens. Made in Javascript using
            the SVG graphics.
          </div>
          PacMan
        </div></a
      >
      <a href="etymologist.html">
        <div class="link1">
          <div class="popup">
            A flashcard game in which the goal is to guess the etymologies of
            the words in simulated languages.
          </div>
          Etymology Game
        </div></a
      >
      <br /><b style="margin-left: 5px">Webpages on this website:</b>
      <a href="index.html"
        ><div class="link1">
          <div class="popup">A webpage with a bunch of links.</div>
          Homepage
        </div></a
      >
      <a href="libertarianism.html"
        ><div class="link2 link1">
          <div class="popup">What do I think about politics?</div>
          Libertarianism
        </div></a
      >
      <a href="vegetarianism.html"
        ><div class="link1">
          <div class="popup">Why I don't eat meat.</div>
          Vegetarianism
        </div></a
      >
      <a href="Simulation.html"
        ><div class="link2 link1">
          <div class="popup">Could the universe be a giant computer?</div>
          Digital Physics
        </div></a
      >
      <a href="linguistics.html"
        ><div class="link1">
          <div class="popup">
            Why I like languages.<br /><br />
            See also:<br />
            <u
              style="color: #0077ff"
              onclick="window.open('http://flatassembler.github.io/toponyms.html'); window.close();"
              >Croatian Toponyms</u
            ><br />
            <u
              style="color: #0077ff"
              onclick="window.open('http://flatassembler.github.io/Indo-Austronesian.html'); window.close();"
              >Indo-Austronesian</u
            >
          </div>
          Linguistics
        </div></a
      >
      <a href="informatics.html"
        ><div class="link2 link1">
          <div class="popup">Why I like computers.</div>
          Informatics
        </div></a
      >
      <a href="pseudosciences.html"
        ><div class="link1">
          <div class="popup">
            My advice on how to recognize and deal with false sciences.
          </div>
          Pseudosciences
        </div></a
      >
      <br /><b style="margin-left: 5px">On Internet forums and blogs:</b>
      <a href="http://linguistforum.com/outside-of-the-box/croatian-toponyms/"
        ><div class="link1">
          <div class="popup">
            The forum thread in which I explained my linguistic theories in
            detail.
          </div>
          Croatian Toponyms
        </div></a
      >
      <a href="https://atheistforums.org/thread-50241.html"
        ><div class="link2 link1">
          <div class="popup">My parody of the conspiracy theorists.</div>
          Airplanes Don't Exist
        </div></a
      >
    </aside>
    <section>
      <p style="margin-left: 5px; margin-right: 5px">
        <br />
        I've started a discussion about AEC
        <a href="https://www.forum.hr/showthread.php?t=1125353">on</a>
        <a href="https://atheistforums.org/thread-57848.html">many</a>
        <a href="https://philosophicalvegan.com/viewtopic.php?f=15&t=4429"
          >Internet</a
        >
        <a
          href="https://www.theflatearthsociety.org/forum/index.php?topic=85381.0"
          >forums</a
        >, including
        <a
          href="https://www.reddit.com/r/ProgrammingLanguages/comments/iehbmj/my_programming_language_can_now_run_in_a_browser/?utm_source=share&utm_medium=web2x&context=3"
          >Reddit</a
        >,
        <a
          href="https://www.reddit.com/r/croatia/comments/piirms/je_li_još_netko_ovdje_izradio_svoj_programski/?utm_source=share&utm_medium=web2x&context=3"
          >Croatian Reddit</a
        >
        and
        <a
          href="https://discord.com/channels/530598289813536771/847014270922391563/847016574421958686"
          >Discord</a
        >.<br />
      </p>
      <br />
      <a id="loptica" href="#vrh" style="position: absolute">
        <svg width="100" height="100">
          <defs>
            <radialgradient id="modrozelen">
              <stop offset="0%" stop-color="#00FFFF" />
              <stop offset="100%" stop-color="#0000FF" />
            </radialgradient>
            <radialgradient id="ljubicastoplav">
              <stop offset="0%" stop-color="#FF00FF" />
              <stop offset="100%" stop-color="#0000FF" />
            </radialgradient>
          </defs>
          <circle cx="50" cy="50" r="50" fill="url(#modrozelen)" />
          <polygon
            points="50,25 25,50 38,50 38,75 62,75 62,50 75,50"
            fill="url(#ljubicastoplav)"
          />
        </svg>
      </a>
      <script type="text/javascript">
        var udaraca = 0;
        var loptica = document.getElementById("loptica");
        var pocetna = loptica.parentNode.clientHeight + 200 - 100;
        loptica.style.top = pocetna;
        loptica.style.right = loptica.parentNode.clientWidth / 2 - 50;
        var h = 0;
        var gk = 1;
        var v = 10;
        window.setInterval(pomakniLopticu, 80);
        window.addEventListener("resize", promijeniPocetnu);
        function promijeniPocetnu() {
          pocetna = loptica.parentNode.clientHeight + 210 - 100;
          loptica.style.top = pocetna;
          loptica.style.right = loptica.parentNode.clientWidth / 2 - 50;
          h = 0;
          gk = 1;
          v = 10;
        }
        function pomakniLopticu() {
          h += v;
          v -= gk;
          if (h < 0) {
            v = -v * 0.75;
            h = 0;
            udaraca++;
            if (udaraca > 20) {
              udaraca = 0;
              v = 10;
            }
          }
          loptica.style.top = pocetna - h;
        }
      </script>
    </section>
    <main class="main1" id="glavni" style="display: block">
      <a name="vrh"></a>
      <h2 style="text-align: center">AEC Specification</h2>
      <div
        style="
          text-align: justify;
          margin-left: 10px;
          margin-right: 10px;
          margin-bottom: 25px;
        "
      >
        <b>Contents</b><br />
        <ol>
          <li>
            <a href="#aec_logo">Logo of my programmming language</a>
          </li>
          <li>
            <a href="#Introduction">Introduction</a>
            <ol>
              <li>
                <a href="#compilers_doing_too_much"
                  >Compilers trying to do too much</a
                >
              </li>
              <li>
                <a href="#special_insight"
                  >How making a programming language is insightful</a
                >
              </li>
              <li>
                <a href="#language_related_bugs"
                  >Programming in your programming language avoids many bugs</a
                >
              </li>
            </ol>
          </li>
          <li>
            <a href="#Platforms">What platforms can be targeted now</a>
            <ol>
              <li>
                <a href="#why_WebAssembly"
                  >Croatian text that explains why WebAssembly is an
                  exceptionally easy target for compilers</a
                >
              </li>
            </ol>
          </li>
          <li>
            <a href="#HowToCompile">How to use the compilers</a>
            <ol>
              <li>
                <a href="#AEC_to_x86">Original ArithmeticExpressionCompiler</a>
              </li>
              <li><a href="#AEC_to_WebAssembly">AECforWebAssembly</a></li>
            </ol>
          </li>
          <li><a href="#Comments">Comments</a></li>
          <li>
            <a href="#Constants">Constants</a>
            <ol>
              <li><a href="#multiline_strings">Multi-line strings</a></li>
              <li>
                <a href="#underscores_inside_number_literals"
                  >Underscores inside number literals</a
                >
              </li>
            </ol>
          </li>
          <li><a href="#Variables">Variable declarations</a></li>
          <li><a href="#Arrays">Arrays and pointers</a></li>
          <li><a href="#Assignments">Assignments</a></li>
          <li><a href="#Operators">Operators</a></li>
          <li>
            <a href="#Branching">Branching</a>
            <ol>
              <li>
                <a href="#ternary_operator_bug"
                  >Caveat about the ternary
                  <span class="inline_code">?:</span> operator</a
                >
              </li>
              <li>
                <a href="#left_hand_side_conditional_operator"
                  >Left Hand Side Conditional Operator</a
                >
              </li>
            </ol>
          </li>
          <li><a href="#Loops">Loops</a></li>
          <li>
            <a href="#Functions">Functions</a>
            <ol>
              <li>
                <a href="#namedArguments"
                  >Named function parameters (named arguments)</a
                >
              </li>
            </ol>
          </li>
          <li><a href="#Structures">Structures</a></li>
          <li><a href="#Assembly">Inline assembly</a></li>
          <li><a href="#Builtin">Built-in functions</a></li>
          <li><a href="#String">String manipulation</a></li>
          <li><a href="#AdvancedArray">Advanced array manipulation</a></li>
          <li>
            <a href="#DifferencesInDialects"
              >Example program in both dialects of AEC</a
            >
          </li>
          <li><a href="#Conclusion">Conclusion</a></li>
          <li><a href="#stuxxnet">Stuxxnet's comments</a></li>
        </ol>
        <b id="aec_logo">Logo</b><br />
        Here is a quick-and-dirty logo I made using GIMP and LibreOffice Calc:
        <img
          src="logo.PNG"
          alt="ArithmeticExpressionCompiler logo"
          style="
            max-width: 100%;
            margin-left: auto;
            margin-right: auto;
            margin-top: 5px;
            margin-bottom: 5px;
            display: block;
          "
        />
        I hope it is good enough, I am not an artist...<br /><br />
        <b id="Introduction">Introduction</b><br />
        <span id="compilers_doing_too_much"
          >Compilers these days, even C compilers, have lots of features and are
          often smarter than the programmer when it comes to things they are
          made to do. While this is usually very useful, sometimes it's
          counter-productive. Suppose that you are writing a program in Assembly
          and want to do something high-level (because correctness is way more
          important than speed). You can't tell your C compiler to simply output
          the code to assign <span class="inline_code">sqrt(a*a+b*b)</span> to
          <span class="inline_code">c</span>, if you try to, it will complain
          those variables aren't declared and that you aren't in a C function. C
          compilers have ideas how to declare functions and variables in
          assembly. While these ideas usually work, sometimes you are writing
          something where the assembler will complain if you give it the code
          that C compilers produced for those things, and there is no way to
          modify the code the C compiler outputs for declaring a function in C.
          So, sometimes, compilers, while they could come useful for some task,
          are trying to do too much and are thus counter-productive. In my
          opinion, this is especially true for the mainstream compilers
          targetting <a href="https://youtu.be/cbB3QEwWMlA">WebAssembly</a>, but
          <a href="#about_emscripten">more on that later</a>. Also, compilers
          are buggy, and nearly all compiler bugs are in the optimizer. Can we
          have a language with a compiler that does only what you told it, in a
          very predictable way? Well, that's what inspired me to create
          <i>Arithmetic Expression Compiler</i> (AEC) a few years ago. The first
          programming language I learned was
          <a href="https://smallbasic-publicwebsite.azurewebsites.net/"
            >Microsoft Small Basic</a
          >, I have made a
          <a href="https://github.com/FlatAssembler/Labyrinth"
            >Labyrinth game</a
          >
          in it, and it has influenced a lot the decisions I made when designing
          my programming language. Microsoft Small Basic is a simplified
          programming language that compiles to .NET bytecode (the same one that
          C# compiles to), and it is the only language that compiles to .NET
          bytecode that I have managed to learn so far.</span
        ><br /><span id="special_insight"
          >I have also always been interested in languages, both natural and
          artificial (such as programming languages), and making a programming
          language will certainly give me a lot better insight into how
          programming languages really work. That is not quite true for natural
          languages: if you try to make your own constructed language to be
          spoken by humans (similar to Esperanto), and you do not know about
          <i lang="la">consecutio temporum</i>, you will most likely not specify
          how <i lang="la">consecutio temporum</i> is supposed to work in your
          language and you will probably not even realize your grammar has a
          huge hole in its specification (You will assume it is understood by
          itself it will be done the same way as in your native language,
          thinking, like I used to think before learning about
          <i lang="la">consecutio temporum</i> in English, that the way tenses
          are put together in complex sentences in your native language is based
          on logic, rather than that the rules for that are
          essentially-arbitrary. And you don't even need complex sentences to
          show that tenses work very differently in different languages, even
          related ones. In English, an adverbial phrase such as &quot;<i
            >every evening</i
          >&quot; puts the verb in a simple tense. You say &quot;<i
            >He comes here every evening.</i
          >&quot;, and &quot;<i>He is coming here every evening.</i>&quot; is
          ungrammatical, or is perhaps grammatical for the meaning that the
          speaker is annoyed by him coming. In Croatian, exactly the opposite is
          true: an adverbial phrase such as &quot;<i>svaku ve&ccaron;er</i
          >&quot;, meaning &quot;<i>every evening</i>&quot;, puts the sentence
          in a continuous tense. You say &quot;<i
            >On dolazi ovdje svaku ve&ccaron;er.</i
          >&quot;, and &quot;<i>On do&#x0111;e ovdje svaku ve&ccaron;er.</i
          >&quot; sounds very ungrammatical, or is perhaps grammatical for the
          meaning that it is going to happen in the future even though it is not
          happening yet. I have asked a
          <a href="https://latin.stackexchange.com/q/20898/8533"
            >StackExchange question about how it is in Latin</a
          >, another natural language I know somewhat. You will probably not
          realize that such things differ between languages by making your own
          language similar to Esperanto.). But it is true that making a
          programming language gives you a special insight into how programming
          languages, and computers in general, work. Especially if you are
          writing everything yourself (like I am doing), rather than using
          frameworks for tokenizing, parsing and compiling. To be clear, I am
          not saying making your programming language gives you some special
          insight into how languages in general work. Although in
          <a href="Fonoloska_evolucija_jezika.docx">papers</a>
          <a href="Karasica.doc">I</a>
          <a
            href="https://github.com/FlatAssembler/ArithmeticExpressionCompiler/raw/master/seminar/PojednostavljeniSeminar.pdf"
            >have</a
          >
          <a href="PicoBlaze/PicoBlaze.rtf">written</a> I have often made
          comparisons between human languages and programming languages, I am
          not entirely convinced the similarity between human languages and
          programming languages is anything more than superficial (Look up
          &quot;<i>pseudo-coordination</i>&quot; - it is a grammatical
          construction found in many languages, including English, which can
          hardly be explained by structural or generative theories of the
          syntax. Or, probably a less extreme example, &quot;<i
            ><a href="https://languagedesign.stackexchange.com/q/1461/330"
              >Donkey Sentences</a
            ></i
          >&quot;.).</span
        ><br />
        <span id="language_related_bugs"
          >Also, I think programming in a programming language you have made
          yourself is a good idea because it avoids the bugs that come from
          misunderstanding the programming language you are using. I think that
          is a major source of bugs in programs, yet one that is talked about
          very little. Most of the bugs I've run into came from me
          misunderstanding the language I was using. Quite a few languages, most
          notably JavaScript, try to fix syntactically incorrect programs by
          inserting a semi-colon <span class="inline_code">;</span> according to
          some rules. Sometimes the result of that is really what the programmer
          intended, but quite often it is not. I have run into that problem, not
          in JavaScript, but in Octave, when I was writing
          <a href="toponyms.html#correction"
            >a program to study the relationship between the Shannon entropy and
            the collision entropy</a
          >. It was only when I tried running my program in MatLab (another
          implementation of the same programming language) that I even realized
          there was a bug. Had I used my programming language instead of Octave,
          something like that simply could not have happened to me. And when
          writing my AEC-to-WebAssembly compiler in C++, C++ has surprised me
          quite a few times, and once made a very hard-to-trace bug (you can
          read about it in the <a href="#Structures">Structures section</a>).
          When programming in a programming language you have made, you
          understand how the tools you are using work, and you have an at least
          basic understanding how the environment you are targetting works (to
          make a compiler targetting WebAssembly, you need to have at least
          basic understanding how modern browsers work), so you are not doing
          bloodletting. WebAssembly is designed to be an exceptionally easy
          target for compilers, so now you can easily program in a programming
          language you have made and make the programs you have written in it
          run in modern browsers.</span
        ><br />
        <br /><b id="Platforms">What platforms can be targeted now</b><br />
        Right now, I've written two compilers for the AEC language. First, I
        wrote one targeting x86 processors (AMD and Intel). That one is written
        in JavaScript and the <a href="compiler.html">core of it</a> can be run
        in browsers that have basic support for JavaScript (even in Internet
        Explorer 6). To use all the features, one needs to use
        <a href="https://nodejs.org/en/">NodeJS</a> or
        <a href="https://duktape.org/">Duktape</a> with it, to enable it to
        access the file system. Thanks to
        <a href="https://www.vogons.org/viewtopic.php?f=31&t=74881"
          >the help I received from people on VOGONS forum</a
        >, my AEC-to-x86 compiler outputs assembly code that runs on both i486
        in 32-bit mode and on x86_64 processors in 64-bit mode, with no
        modification (it uses <span class="inline_code">ebx</span> register for
        indexing arrays, which is allowed (although not recommended) in 64-bit
        mode, and it does not push and pop 32-bit values from the stack, it only
        pushes and pops 16-bit ones, which is allowed in both 32-bit and 64-bit
        mode, and so on..). When I started studying at the university, many
        professors were impressed by my AEC-to-x86 compiler. My Algorithms and
        Data Structures professor Alfonso Baumgartner urged me to write a
        <a
          href="https://github.com/FlatAssembler/ArithmeticExpressionCompiler/raw/master/seminar/PojednostavljeniSeminar.pdf"
        >
          paper</a
        >
        about it which got published in Osje&#269;ki Matemati&#269;ki List. The
        compiler targeting x86 is around 2'000 lines of code (excluding the
        example programs). So, I decided to extend it so that my language can be
        used to target JavaScript Virtual Machine using WebAssembly (the
        JavaScript bytecode, which Mozilla has been pushing to get standardized,
        so that people can run programming languages better than JavaScript in a
        browser), and not only x86. As targeting WebAssembly is easier than
        targeting x86 (or probably any physical processor, as WebAssembly was
        designed to be an easy target for compilers, rather than to be easily
        implemented in hardware or easy to write assembly-language code for
        manually), I was able to add many new features. However, I think it's
        still not nearly as
        <i>intrusive</i> as C compilers are.
        <a href="https://emscripten.org/" id="about_emscripten">Emscripten</a>
        (the primary C and C++ compiler for WebAssembly, a modified version of
        the <a href="https://clang.llvm.org/">CLANG</a> compiler) always assumes
        the standard C library is present on the JavaScript Virtual Machine when
        compiling any kind of program, so it's an overkill for most cases when
        it could come useful. The
        <a href="https://github.com/FlatAssembler/AECforWebAssembly"
          >AEC-to-WebAssembly compiler</a
        >
        has around 5'500 lines of code, and it's written in C++ (a language much
        more suitable for writing compilers than JavaScript). <br />
        WebAssembly is one of the reasons I am a libertarian, because it shows
        that, when a private company makes a mistake, no matter how hopeless the
        situation seems, there will come a solution... from capitalism itself.
        Making JavaScript, which is widely agreed to be a very poorly-designed
        programming language, a standard language of the Internet, which is what
        Netscape did back when it had a near-monopoly on the Internet
        browsers... for a long time, it seemed like a way to retard the
        development of the Internet forever. Fortunately, once the Internet got
        used more, somebody came up with this brilliant idea of WebAssembly,
        which seems to solve basically all the problems created by Netscape with
        that wrong decision. And, incidentally, that solution also significantly
        lowers the barrier towards making a new programming language, so that
        many more people can experiment with those things. When governments make
        a mistake, quite often, there is no solution. When the UN decided back
        in 1948 that the solution to the Holocaust is to make Palestinians pay
        for the Hitler's crimes with their land... it led to wars which continue
        to this day, and will likely continue all until a nuclear holocaust
        destroys most life on Earth (as has almost happened a few times by now).
        A private company most likely cannot make a mistake with such horrible
        consequences.<br />
        <b>UPDATE</b> on 11/10/2020: Of course, my compiler is not a very
        high-quality software. The LGTM static analyzer places it in the
        <a
          href="https://lgtm.com/projects/g/FlatAssembler/AECforWebAssembly/context:cpp"
          ><img
            alt="Language grade: C/C++"
            src="https://img.shields.io/lgtm/grade/cpp/g/FlatAssembler/AECforWebAssembly.svg?logo=lgtm&logoWidth=18"
        /></a>
        category, because it has found
        <a
          href="https://lgtm.com/projects/g/FlatAssembler/AECforWebAssembly/alerts/"
          ><img
            alt="Total alerts"
            src="https://img.shields.io/lgtm/alerts/g/FlatAssembler/AECforWebAssembly.svg?logo=lgtm&logoWidth=18"
        /></a>
        potential bugs per 5'500 lines of code, most of them being unnecessarily
        doing deep copies of C++ objects (wasting time and memory), and quite a
        few of them being using potentially uninitialized variables in
        JavaScript. If you want to collaborate with me, perhaps one of the first
        things to do is fix those bugs found by static analysis.<br />
        <b>UPDATE</b> on 28/08/2021: As a part of a paper I have written in my
        economics class, I have explained why I chose to target WebAssembly and
        why I think WebAssembly will revolutionalize compilers:
        <div class="quotation" lang="hr" id="why_WebAssembly">
          WebAssembly je dizajniran da bude jako lagan cilj za compilere, daleko
          lakši nego asemblerski jezici fizičkih procesora. Kada dizajniramo
          asemblerski jezik za fizički procesor, imamo tri trade-offsa
          (pritisaka):
          <ol>
            <li>
              Moramo osigurati da taj asemblerski kod mogu lagano ispisivati
              compileri. Compilerima je najlakše ispisivati asemblerske kodove
              za mašine bazirane na stogu, i mislim da će se svatko tko je
              napravio i najjednostavniji compiler s time složiti. Korištenje
              registara kakvi postoje u fizičkim procesorima zahtijeva
              komplicirane algoritme. Compilerima nije važno ima li dovoljno
              registara da se sve varijable pohrane u registar, jer compileri
              lako stave varijable u memoriju i vode računa gdje su. Compilerima
              koji optimiziraju kod smeta postojanje nevažnih instrukcija u
              asemblerskom jeziku, jer im je onda teško procijeniti je li
              asemblerski kod koji ih koristi optimalniji ili manje optimalan.
            </li>
            <li>
              Moramo osigurati da taj asemblerski kod mogu relativno lagano
              pisati ljudi. Jer, suočimo se s time, neki se programi nužni za
              rad računala, kao što su bootloaderi, ne mogu pisati u višim
              programskim jezicima, a još su se manje mogli prije 50-ak godina
              kada su osnove asemblerskih jezika kojima se služe današnji (x86,
              ARM...) procesori dizajnirane. Ljudima je, mislim da će se svatko
              tko je pisao asemblerski kod složiti, najlakše pisati asemblerski
              kod za procesore s mnogo registara, a teško im je koristiti stog
              za računanje, gotovo suprotno nego što je lagano compilerima. A
              voditi računa o tome koliko je koja lokalna varijabla udaljena od
              vrha sistemskog stoga, što je compilerima jako lagano, za ljude je
              gotovo nemoguća misija. Ljudima koji pišu asemblerske kodove dobro
              dođu compilerima nevažne instrukcije kao što su
              <code>fsin</code> (sporo, ali ekstremno precizno računanje
              sinusa), koje optimizirajućim compilerima koji pokušavaju
              modelirati procesor smetaju.
            </li>
            <li>
              Procesor koji će razumjeti taj asemblerski kod (točnije, strojni
              kod koji odgovara tom asemblerskom kodu naredbu-po-naredbu) mora
              biti moguće efikasno fizički implementirati. Jer, suočimo se s
              time, na kraju krajeva, procesori su žice. Moderni procesori su
              bezbroj žica spojenih na način toliko kompliciran da ti glava
              pukne i da ti bude drago što o tome ne učite na fakultetu.
              Zapravo, vjerojatno ti ni jedna osoba ne bi mogla objasniti kako
              moderni procesori funkcioniraju. No, ipak, očito je da asemblerski
              jezici koji semantički pružaju neograničeno velik stog ili
              proizvoljan broj registara ne mogu biti efikasno implementirani
              žicama.
            </li>
          </ol>
          WebAssembly ne podliježe drugom i trećem pritisku, i zato je izuzetno
          lagan cilj za compilere. Java bytecode zamišljen je da se može
          implementirati fizički, i zato, za razliku od WebAssemblyja, podliježe
          trećem pritisku. Dakle, danas, zahvaljujući WebAssemblyju, tko ne
          želi, ne mora koristiti JavaScript za front-end programiranje, već
          može i neki drugi programski jezik. Kako je WebAssembly lagan cilj za
          compilere, relativno je lagano dizajnirati svoj programski jezik i
          napraviti compiler koji će ga prevoditi u WebAssembly. To sam i ja
          napravio, i to je najveći program koji sam napisao do sada, ima 5'500
          redaka i pisan je u C++-u.
        </div>
        Sorry about that, but it would take me a lot of time to translate that
        to English.<br /><b>UPDATE</b> on 17/04/2022: I have started a
        <a
          href="https://www.reddit.com/r/cpp_questions/comments/u2u0jm/why_it_is_that_c_can_be_compiled_to_javascript/?utm_source=share&utm_medium=web2x&context=3"
          >Reddit thread asking why there are a few C++ compilers targetting
          WebAssembly (JavaScript bytecode), but no C++ compilers targetting
          Java Bytecode</a
        >.<br /><br />
        <b id="HowToCompile">How to use the compilers</b><br />
        <a name="AEC_to_x86"></a>Probably the simplest way to use the AEC-to-x86
        compiler on a Linux machine is to type the following code into a
        terminal emulator:
        <pre class="LinuxShell">
mkdir ArithmeticExpressionCompiler
cd ArithmeticExpressionCompiler
<span class="Keyword">if</span> <span class="Parenthesis">[</span> <span class="Operator">$</span><span class="Parenthesis">(</span>command -v wget <span class="Operator">&gt;</span> /dev/null <span class="Constant">2</span><span class="Operator">&gt;&amp;</span><span class="Constant">1</span> <span class="Operator">;</span> echo <span class="Operator">$</span>?<span class="Parenthesis">)</span> <span class="Keyword">-eq</span> <span class="Constant">0</span> <span class="Parenthesis">]</span> <span class="Comment"># Check if "wget" exists, see those StackOverflow answers for more details:
                                                                                         # <a href="https://stackoverflow.com/a/75103891/8902065">https://stackoverflow.com/a/75103891/8902065</a>
                                                                                         # <a href="https://stackoverflow.com/a/75103209/8902065">https://stackoverflow.com/a/75103209/8902065</a></span>
<span class="Keyword">then</span>
  wget <a href="https://flatassembler.github.io/Duktape.zip">https://flatassembler.github.io/Duktape.zip</a>
<span class="Keyword">else</span>
  curl -o Duktape.zip <a href="https://flatassembler.github.io/Duktape.zip">https://flatassembler.github.io/Duktape.zip</a>
<span class="Keyword">fi</span>
unzip Duktape.zip
<span class="Keyword">if</span> <span class="Parenthesis">[</span> <span class="Operator">$</span><span class="Parenthesis">(</span>command -v clang <span class="Operator">&gt;</span> /dev/null <span class="Constant">2</span><span class="Operator">&gt;&amp;</span><span class="Constant">1</span> <span class="Operator">;</span> echo <span class="Operator">$</span>?<span class="Parenthesis">)</span> <span class="Keyword">-eq</span> <span class="Constant">0</span> <span class="Parenthesis">]</span> <span class="Comment"># We prefer "clang" to "gcc" because... what if somebody tries to run this in CygWin terminal? GCC will not work then, CLANG might.</span>
<span class="Keyword">then</span>
  c_compiler<span class="Operator">=</span><span class="String">"clang"</span>
<span class="Keyword">else</span>
  c_compiler<span class="Operator">=</span><span class="String">"gcc"</span>
<span class="Keyword">fi</span>
$c_compiler -o aec aec.c duktape.c -lm <span class="Comment"># The linker that comes with recent versions of Debian Linux <a href="#GCC_requires_lm">insists that "-lm" is put AFTER the source files</a>, or else it outputs some confusing error message.</span>
<span class="Keyword">if</span> <span class="Parenthesis">[</span> <span class="String">"<i>$OS</i>"</span> <span class="Operator">=</span> <span class="String">"Windows_NT"</span> <span class="Parenthesis">]</span>
<span class="Keyword">then</span>
  ./aec analogClockForWindows.aec
  $c_compiler -o analogClockForWindows analogClockForWindows.s -m32
  ./analogClockForWindows
<span class="Keyword">else</span>
  ./aec analogClock.aec
  $c_compiler -o analogClock analogClock.s -m32
  ./analogClock
<span class="Keyword">fi</span>
        </pre>
        If everything is fine, the Analog Clock program should now print the
        current time in the terminal. I think this would work on the vast
        majority of Linux machines, as well as on many non-Linux (FreeBSD,
        Solaris...) machines. A potential problem is that the 32-bit libraries
        are not installed on a 64-bit Linux machine (so that
        <span class="inline_code">-m32</span> fails), but this is rarely the
        case, as Linux machines today usually have
        <a href="https://www.winehq.org/">WINE</a> (a Windows compatibility
        layer requiring 32-bit libraries), or at least some 32-bit programs.
        Needless to say, this will not work on Linux running on ARM processors,
        such as Android or Raspberry Pi. Also, the Analog Clock program probably
        cannot be run on Windows (I haven't managed to try it using
        <a href="https://www.cygwin.com/">CygWin</a>, but I am quite sure it
        wouldn't run on Windows even if I managed to install Cygwin. (<i
          >UPDATE on 08/05/2021: I have found a relatively simple way to modify
          the <span class="inline_code">analogClock.aec</span> so that it can be
          assembled by the version of GNU Assembler that comes with 32-bit
          <a href="https://mingw-w64.org/doku.php">MinGW-W64</a>, and thus run
          on both 32-bit and 64-bit Windows, so I saved it in
          <span class="inline_code">analogClockForWindows.aec</span>.
          Unfortunately, it still shows a lot of errors if you attempt to
          assemble it using the versions of GNU Assembler that come with TDM-GCC
          or CygWin. Apparently, the versions of GNU Assembler that come with
          various ports of GCC on Windows are different from each other to a
          greater extent than the version of GNU Assembler that runs on Linux
          and one that comes with MinGW-W64 are. I find that both surprising and
          somewhat unfortunate. What is especially unfortunate is the fact that
          <a href="https://stackoverflow.com/a/67451423/8902065"
            >some preprocessor directives in GNU Assembler have the same syntax,
            but different meanings depending on whether it is targetting Linux
            or Windows</a
          >. With a little more modifications, which I have also done,
          <span class="inline_code">analogClockForWindows.aec</span>
          can also be assembled by the version of
          <a href="https://llvm.org/docs/CommandGuide/llvm-as.html"
            >LLVM Assembler</a
          >
          that comes with CLANG on Windows. However, the GNU Assembler that
          comes with MinGW-W64 and the LLVM Assembler that comes with CLANG on
          Windows do not output the same machine code. The executable produced
          by LLVM Assembler appears to run significantly faster on Windows 10,
          but it refuses to run at all on Windows XP. I have not studied it
          enough to explain what is going on there, and it is a bit creepy.</i
        >)), but some other programs in
        <span class="inline_code">Duktape.zip</span> can. However, those cannot
        be assembled by GNU Assembler (invoked by
        <span class="inline_code">gcc</span>), you need to use
        <a href="https://flatassembler.net/">FlatAssembler</a> instead. See the
        <span class="inline_code">ReadMe.html</span> inside
        <span class="inline_code">Duktape.zip</span> for more details. The
        <a
          href="https://github.com/FlatAssembler/ArithmeticExpressionCompiler/raw/master/ArithmeticExpressionCompiler.zip"
          >executables of Duktape for various x86 OS-es and example x86 AEC
          programs</a
        >
        are available in a ZIP archive on my GitHub profile (<i
          >UPDATE on 13/05/2021: Like I have said, the
          <span class="inline_code">analogClockForWindows.exe</span> file,
          assembled by CLANG on Windows, although it works on both 32-bit and
          64-bit Windows 10, for some reason that escapes me, it refuses to run
          on Windows XP. You can assemble the assembly code produced by my
          compiler for the
          <span class="inline_code">analogClockForWindows.aec</span>, which will
          be called <span class="inline_code">analogClockForWindows.s</span>,
          using MinGW-w64, and then it will run on Windows XP, but it will be
          slower. Again, the explanation for that escapes me. An obvious
          explanation would be that MinGW-w64 includes some kind of a polyfill
          for functions missing on Windows XP, that make the executable able to
          run on it, but make it slower. But the problem with that explanation
          is that, actually, the executable produced by CLANG is bigger than the
          executable produced by MinGW-w64. If the executable by MinGW-w64 were
          polyfilled, we would expect it to be bigger, rather than smaller.
          (UPDATE on 16/05/2021: I have started a
          <a
            href="https://www.reddit.com/r/asm/comments/nd9j8v/why_do_gnu_assembler_that_comes_with_mingww64_and/"
            >Reddit thread</a
          >
          about it.)</i
        >). You can also use
        <a
          href="https://github.com/FlatAssembler/SimpleCalculator/raw/master/SimpleCalculator.zip"
          >SimpleCalculator</a
        >, a version of the AEC-to-x86-compiler running in
        <a href="https://github.com/mozilla/rhino">Rhino</a> (a JavaScript
        engine written in Java, by Mozilla) and using
        <a href="https://docs.oracle.com/javase/tutorial/uiswing/">Swing GUI</a
        >. It an be used as a simple calculator, but it also supports converting
        AEC programs to x86 assembly. The AEC-to-x86 compiler, both when run in
        Rhino and when run in Duktape, can output assembly in two formats, one
        compatible with FlatAssembler, and one compatible with GNU Assembler. To
        switch between them, use
        <span class="inline_code">syntax fasm</span> and
        <span class="inline_code">syntax gas</span>. By default, it targets
        FlatAssembler. When targeting GNU Assembler, keep in mind that the
        directive <span class="inline_code">syntax gas</span> needs to be the
        very first directive in your program, even before any comments. Namely,
        the AEC-to-x86 compiler passes the comments down to the assembler, but
        FlatAssembler begins comments with <span class="inline_code">;</span>,
        whereas GNU Assembler begins comments with
        <span class="inline_code">#</span>. To GNU Assembler, semi-colon
        <span class="inline_code">;</span> means to have multiple
        assembly-language directives in a single line (useful for when invoked
        from a debugger, where you need to inline a few directives).<br />
        <a name="GCC_requires_lm"></a>By the way, in case you are interested,
        here is how <i>zero9178</i> (a friend I met on Discord, who maintains
        his own GCC port to Windows) explains the fact that putting
        <span class="inline_code">-lm</span> in front of source files causes an
        error on some (but, curiously, not all) versions of Linux:
        <div class="quotation">
          Only a very educated guess, but GNU ld is very sensitive to link order
          of archives and lazily loads archives.<br />
          More specifically what is likely happening here is that it is passing
          <span class="inline_code">-lm</span> first, before any object files to
          the linker (you can see the linker invocation GCC does by adding
          <span class="inline_code">-v</span> that should give you more
          info).<br />
          Since at that point in time, there are no undefined symbols, as object
          files have not been processed yet, the
          <span class="inline_code">-lm</span> is effectively discard. <br />
          Later <span class="inline_code">-lm</span> are likely discard too as
          they are seen as duplicates of the first one. <br />
          Usually <span class="inline_code">-lm</span> would be placed further
          back, since later object files or other archives that require symbols
          from it will have already been imported by the linker.
        </div>
        <a name="AEC_to_WebAssembly"></a>Using the AEC-to-WebAssembly compiler
        is, on most Linux machines, a little trickier. The following code might
        work:
        <pre class="LinuxShell">
<span class="Keyword">if</span> <span class="Parenthesis">[</span> <span class="Operator">$</span><span class="Parenthesis">(</span>command -v git <span class="Operator">&gt;</span> /dev/null <span class="Constant">2</span><span class="Operator">&gt;&amp;</span><span class="Constant">1</span> <span class="Operator">;</span> echo <span class="Operator">$</span>?<span class="Parenthesis">)</span> <span class="Keyword">-eq</span> <span class="Constant">0</span> <span class="Parenthesis">]</span>
<span class="Keyword">then</span>
  git clone <a href="https://github.com/FlatAssembler/AECforWebAssembly.git">https://github.com/FlatAssembler/AECforWebAssembly.git</a>
  cd AECforWebAssembly
<span class="Keyword">elif</span> <span class="Parenthesis">[</span> <span class="Operator">$</span><span class="Parenthesis">(</span>command -v wget <span class="Operator">&gt;</span> /dev/null <span class="Constant">2</span><span class="Operator">&gt;&amp;</span><span class="Constant">1</span> <span class="Operator">;</span> echo <span class="Operator">$</span>?<span class="Parenthesis">)</span> <span class="Keyword">-eq</span> <span class="Constant">0</span> <span class="Parenthesis">]</span>
<span class="Keyword">then</span>
  mkdir AECforWebAssembly
  cd AECforWebAssembly
  wget <a href="https://github.com/FlatAssembler/AECforWebAssembly/archive/refs/heads/master.zip">https://github.com/FlatAssembler/AECforWebAssembly/archive/refs/heads/master.zip</a>
  unzip master.zip
  cd AECforWebAssembly-master
<span class="Keyword">else</span>
  mkdir AECforWebAssembly
  cd AECforWebAssembly
  curl -o AECforWebAssembly.zip -L <a href="https://github.com/FlatAssembler/AECforWebAssembly/archive/refs/heads/master.zip">https://github.com/FlatAssembler/AECforWebAssembly/archive/refs/heads/master.zip</a> <span class="Comment"># Without the "-L", "curl" will store HTTP Response headers of redirects to the ZIP file instead of the actual ZIP file.</span>
  unzip AECforWebAssembly.zip
  cd AECforWebAssembly-master
<span class="Keyword">fi</span>
<span class="Keyword">if</span> <span class="Parenthesis">[</span> <span class="Operator">$</span><span class="Parenthesis">(</span>command -v g++ <span class="Operator">&gt;</span> /dev/null <span class="Constant">2</span><span class="Operator">&gt;&amp;</span><span class="Constant">1</span> <span class="Operator">;</span> echo <span class="Operator">$</span>?<span class="Parenthesis">)</span> <span class="Keyword">-eq</span> <span class="Constant">0</span> <span class="Parenthesis">]</span>
<span class="Keyword">then</span>
  g++ -std=c++11 -o aec AECforWebAssembly.cpp <span class="Comment"># "-std=c++11" should not be necessary for newer versions of "g++". <a href="https://github.com/FlatAssembler/AECforWebAssembly/issues">Let me know</a> if it is, as that probably means I disobeyed some new C++ standard (say, C++23).</span>
<span class="Keyword">else</span>
  clang++ -o aec AECforWebAssembly.cpp
<span class="Keyword">fi</span>
cd analogClock
../aec analogClock.aec
npx -p wabt wat2wasm analogClock.wat
<span class="Keyword">if</span> <span class="Parenthesis">[</span> <span class="String">"<i>$OS</i>"</span> <span class="Operator">=</span> <span class="String">"Windows_NT"</span> <span class="Parenthesis">]</span> <span class="Comment"># <a href="https://stackoverflow.com/a/75125384/8902065">https://stackoverflow.com/a/75125384/8902065</a>
                            # <a href="https://www.reddit.com/r/bash/comments/10cip05/comment/j4h9f0x/?utm_source=share&utm_medium=web2x&context=3">https://www.reddit.com/r/bash/comments/10cip05/comment/j4h9f0x/?utm_source=share&utm_medium=web2x&context=3</a></span>
<span class="Keyword">then</span>
  node_version<span class="Operator">=$</span><span class="Parenthesis">(</span>node.exe -v<span class="Parenthesis">)</span>
<span class="Keyword">else</span> <span class="Comment"># We are presumably running on an UNIX-like system, where storing output of some program into a variable works as expected.</span>
  node_version<span class="Operator">=$</span><span class="Parenthesis">(</span>node -v<span class="Parenthesis">)</span>
<span class="Keyword">fi</span>
<span class="Comment"># "node -v" outputs version in the format "v18.12.1"</span>
node_version<span class="Operator">=$</span><span class="Parenthesis">{</span>node_version<span class="Operator">:</span><span class="Constant">1</span><span class="Parenthesis">}</span> <span class="Comment"># Remove 'v' at the beginning</span>
node_version<span class="Operator">=$</span><span class="Parenthesis">{</span>node_version<span class="Operator">%</span><span class="String"><i>\.</i>*</span><span class="Parenthesis">}</span> <span class="Comment"># Remove trailing ".*".</span>
node_version<span class="Operator">=$</span><span class="Parenthesis">{</span>node_version<span class="Operator">%</span><span class="String"><i>\.</i>*</span><span class="Parenthesis">}</span> <span class="Comment"># Remove trailing ".*".</span>
node_version<span class="Operator">=$</span><span class="Parenthesis">((</span><span class="Operator">$</span>node_version<span class="Parenthesis">))</span> <span class="Comment"># Convert the NodeJS version number from a string to an integer.</span>
<span class="Keyword">if</span> <span class="Parenthesis">[</span> <span class="Operator">$</span>node_version <span class="Keyword">-lt</span> <span class="Constant">11</span> <span class="Parenthesis">]</span>
<span class="Keyword">then</span>
  echo <span class="String">"NodeJS version is lower than 11 (it is <i>$node_version</i>), you will probably run into trouble!"</span>
<span class="Keyword">fi</span>
node analogClock
        </pre>
        Again, if everything is fine, the Analog Clock program should print the
        current time in the terminal. However, in order for this to work, you
        need to have NodeJS installed, which is often not the case. You also
        need to have a version of NodeJS newer than one which is usually shipped
        with Linux, as Debian-like Linux distributions today usually ship with
        NodeJS 10, and CentOS-like distributions with NodeJS 6, and the code my
        compiler generates relies on
        <span class="inline_code">WebAssembly.Global</span> being present, which
        is only true on NodeJS 11 and newer. For the exactly same reason, the
        code my compiler produces will not run in Firefox 52, which is the last
        version of Firefox to run on Windows XP, and the first one to support
        WebAssembly. I think I made the right decision not to waste time
        supporting the earliest implementations of WebAssembly, as almost nobody
        will notice my effort, and I'd need to put a lot of it.
        <i
          >Where to draw the line there?
          <span style="font-style: normal"
            ><img
              style="height: 1em"
              src="https://atheistforums.org/images/smilies/huh.gif"
              onerror="this.onerror=function(){this.onerror=null;this.src='https://www.theflatearthsociety.org/forum/Smileys/default/undecided.gif';};this.src='https://philosophicalvegan.com/images/smilies/icon_question.gif'"
              alt="&#10068;&#128580;"
          /></span>
          Make my compiler output <a href="http://asmjs.org/">asm.js</a> as
          well?
          <span style="font-style: normal"
            ><img
              style="height: 1em"
              src="https://atheistforums.org/images/icons/thumbsdown.gif"
              onerror="this.onerror=function(){this.onerror=null;this.src='https://www.theflatearthsociety.org/forum/Smileys/default/angry.gif';};this.src='https://philosophicalvegan.com/images/smilies/icon_rolleyes.gif'"
              alt="&#128078;" /></span
        ></i>
        (If you really need the AEC programs to work in old browsers, perhaps
        you could try decompiling them using
        <a href="https://github.com/WebAssembly/wabt/tree/main/wasm2c"
          ><span class="inline_code">wasm2c</span> from WebAssembly Binary
          Toolkit</a
        >
        and somehow re-compiling them using Emscripten (I haven't tried it
        myself, but I speculate it may be possible). Or you may try to somehow
        polyfill WebAssembly, which the
        <a href="https://webassembly.org/docs/faq/">FAQ of WebAssembly</a> says
        is, in principle, possible. But I am quite sure you would need to
        polyfill the entire WebAssembly, and not just
        <span class="inline_code">WebAssembly.Global</span>.) Of course, in
        order for <span class="inline_code">npx -p wabt wat2wasm</span> to work,
        you either need to have
        <a href="https://www.npmjs.com/package/wabt">WABT</a> already installed,
        or you need to be connected to the Internet so that
        <span class="inline_code">npx</span> can download it (which you probably
        do as you recently cloned from GitHub, but the firewall also needs to
        enable access to <span class="inline_code">npmjs.com</span>, which fewer
        firewalls do). If you want to use AEC-to-WebAssembly compiler on an OS
        that's not compatible with Linux, well, good luck. I have provided some
        executable files of my compiler for different OS-es, including FreeDOS
        (compiled using
        <a href="https://github.com/andrewwutw/build-djgpp"
          >DJGPP C++ compiler</a
        >), in case it helps, as the
        <a href="https://github.com/FlatAssembler/AECforWebAssembly/releases"
          >assets to the releases of AECforWebAssembly</a
        >. Especially good luck using WABT and NodeJS there (I believe WABT can
        be made to run on FreeDOS, but with a lot of difficulty, and that NodeJS
        cannot be made to run on FreeDOS even with a lot of effort.) Sorry, but
        dealing with binary files is complicated, and me building an assembler
        for WebAssembly into my compiler (instead of simply outputting assembly)
        would give me a lot of hassle and very little benefit. I hope you
        understand. And, if you are going to try to run the
        <span class="inline_code">analogClock.html</span> file in a browser,
        please note it will not work unless you are using a web server such as
        <span class="inline_code">php -S 127.0.0.1:8080</span>. It has to do
        with sandboxing and external WebAssembly not being trusted by browsers.
        If you are running untrusted WebAssembly (not produced by the JavaScript
        compiler in the browser itself) from your harddrive, the JavaScript
        Virtual Machine cannot be sandboxed not to read or modify or delete the
        data on your harddrive. That is why contemporary web-browsers disallow
        that (just like, when JavaScript was in its infancy, browsers did not
        allow JavaScript on your harddrive to be run without your explicit
        permission). If you are running WebAssembly from a web server, it can be
        sandboxed so that it cannot harm your computer.<br />A friend I met on
        Discord called <i>zero9178</i>
        <a
          href="https://discord.com/channels/172018499005317120/172018499005317120/807727805080010804"
          >helped me write the CMAKE script</a
        >
        for building and testing the AEC-to-WebAssembly compiler, so that you
        can easily use any IDE that works well with
        <a href="https://cmake.org/">CMAKE</a> (Visual Studio, QtCreator,
        NetBeans and CLion can import CMAKE projects automatically, and
        <a href="https://stackoverflow.com/a/9663686/8902065"
          >CMAKE can be made to output configuration files necessary for
          Eclipse</a
        >). For now, however, Visual Studio 2019 falsely claims tests which
        invoke WABT fail (that WABT executables are not proper Windows
        executables, although they can be run from command-line as well as from
        CMAKE run from command line). I do not know why. (<i
          >UPDATE on 26/08/2021: As of time of writing this, the compiler
          crashes if compiled with Visual Studio, due to a
          <a href="https://github.com/FlatAssembler/AECforWebAssembly/issues/5"
            >Stack Overflow error</a
          >.</i
        >) The automated tests are integrated with GitHub Actions and GitLab CI,
        and they seem to work properly there. The
        <span class="inline_code">structureDeclarationTestCompiles</span> seems
        to run around an order of magnitude faster (that is, 10 times faster) on
        GitHub Actions than on the laptop I am working on, and around five times
        faster than on GitLab CI (that is, GitLab CI seems to be around 2 times
        faster than my laptop). I am not sure why, as I expected my compiler to
        run very poorly in computer clouds, because computer clouds are, as far
        as I understand it, made of countless low-powered computers which can be
        well-used only by programs that support parallel execution, which my
        compiler does not. I asked a
        <a
          href="https://www.quora.com/Why-do-the-tests-of-my-C-program-run-around-10-times-faster-on-GitHub-actions-and-around-2-times-faster-on-GitLab-CI-than-on-my-laptop-My-program-uses-no-parallelism-to-make-use-of-a-cloud-platform-so-I-expected-it"
          >question on Quora</a
        >
        about that. Nevertheless, I think the hypothesis that it does not
        actually run there (and that is the reason why it seems to run so
        quickly) can be eliminated, as subsequent tests would fail (WABT invoked
        in
        <span class="inline_code">structureDeclarationTestAssembles</span> would
        exit with an error message, and so would NodeJS invoked by
        <span class="inline_code">structureDeclarationTestRuns</span>) if it
        were the case. The tokenizer of my compiler runs very slowly, and I do
        not know how to make it faster. I have made a
        <a href="https://www.forum.hr/showthread.php?t=1243509">forum thread</a>
        about it.<br />
        <b>UPDATE</b> on 28/05/2021: As a friend I met on Discord called
        <i>elucent</i> (the author of the
        <a href="https://github.com/basilTeam/basil"
          >Basil programming language</a
        >)
        <a
          href="https://discord.com/channels/530598289813536771/847014270922391563/847580726811557998"
          >suggested</a
        >, the tokenizer can be made a lot faster by using
        <span class="inline_code">std::remove_if</span> to erase all whitespace
        at once rather than by calling
        <span class="inline_code">std::vector&lt;typename T&gt;::erase</span>
        for each all-whitespace token (as <i>zero9178</i>
        <a
          href="https://discord.com/channels/172018499005317120/172018499005317120/807748605213409282"
          >had suggested</a
        >
        me to do). I
        <a
          href="https://github.com/FlatAssembler/AECforWebAssembly/commit/9172e49a1108634574fa043b9c5c2dc40590af0c"
          >implemented</a
        >
        that, and now the test
        <span class="inline_code">structureDeclarationTestCompiles</span> takes
        only 2 seconds to run on GitLab CI, whereas it previously took 6 seconds
        (so it is around 3 times faster). He also suggested some other ways to
        make both the tokenizer and the parser faster, but those are harder to
        implement (<i
          >UPDATE on 26/08/2020: A user of the Atheist Forums called
          <a
            href="https://atheistforums.org/thread-63150-post-2054368.html#pid2054368"
            >HappySkeptic</a
          >
          found a way to significantly speed up the parser in a relatively easy
          way.</i
        >).<br />
        <b>UPDATE</b> on 06/06/2021: The AEC-to-WebAssembly compiler can now
        target
        <a href="https://wasi.dev/">WebAssembly System Interface (WASI)</a>, as
        the example
        <a href="hello_world_from_wasi.aec.html">Hello World from WASI</a>
        shows. Basically, you need to put
        <span class="inline_code">#target WASI</span> before any declarations.
        Unlike with AEC-to-x86
        <span class="inline_code">syntax gas</span> directive, comments can go
        before that. I believe this a significant step forward on a way for the
        WebAssembly dialect of AEC to run on rarely used operating systems such
        as FreeDOS, using portable WASI environments such as
        <a href="https://github.com/wasm3/wasm3">Wasm3</a>. Of course, that is
        assuming we also manage to compile
        <span class="inline_code">wat2wasm</span> from WebAssembly Binary
        Toolkit to run there (which will not be easy because CMAKE does not run
        there). Also, some
        <a
          href="https://medium.com/@rauljordan/webassembly-the-future-of-blockchain-computing-1a0ae28f7e40"
          >blockchains support WebAssembly Binary Interface</a
        >, so perhaps my compiler can now be useful there.<br />
        <b>UPDATE</b> on 09/01/2023: Here is how my AEC-to-WebAssembly compiler
        can be compiled using latest Emscripten:
        <pre class="LinuxShell">
emcc -o aec.js AECforWebAssembly.cpp -s NODERAWFS=1 -s ALLOW_MEMORY_GROWTH=1 -s TOTAL_STACK=4MB -O3</pre
        >
        Previous versions of Emscripten did not require
        <span class="inline_code">-s TOTAL_STACK=4MB</span>, but the latest
        version does, because of
        <a href="https://github.com/emscripten-core/emscripten/pull/18191"
          >this pull request</a
        >.<br />
        <b>UPDATE</b> on 05/05/2023: Here is how you can cross-compile my
        AEC-to-WebAssembly compiler from Windows to 64-bit Linux using Docker:
        <pre class="LinuxShell">
PS E:\My programs\AECforWebAssembly> docker run --rm -v "$($PWD):/usr/src/myapp" -w /usr/src/myapp gcc:13.1 g++ -o aec.elf AECforWebAssembly.cpp -static -O3</pre
        >
        Of course, you should replace <span class="inline_code">13.1</span> with
        the version of GCC you want to use. The newer the GCC version, the more
        optimized the output will be, but you are risking running into trouble
        because of the poor backwards compatibility (C++ is not JavaScript,
        where you can expect a program that works now to work forever). For
        instance, GCC 13.1 started to require
        <span class="inline_code">#include &lt;cstdint&gt;</span> in order to
        use <span class="inline_code">uint8_t</span> and similar typenames,
        which
        <a
          href="https://gitlab.com/FlatAssembler/AECforWebAssembly/-/jobs/4202281750"
          >broke my GitLab CI/CD</a
        >
        once GitLab started using GCC 13.1 (which is how I came to know about
        GCC 13.1 in the first place). You <b>need</b> to use
        <span class="inline_code">-static</span>, or else your program will not
        run on any Linux machine that has the C++ library older than GCC 13.1 in
        Docker uses (which are, as of time of writing this, all Linux
        distributions except Fedora). It is also a good idea to run
        <span class="inline_code">strip aec.elf</span> inside Docker after using
        GCC to produce <span class="inline_code">aec.elf</span> to make it use
        less space. I have asked a question on both
        <a href="https://qr.ae/pyIklG">Quora</a> and
        <a
          href="https://www.reddit.com/r/learnprogramming/comments/139l3m7/why_does_gcc_run_in_docker_produce_around_30/?utm_source=share&utm_medium=web2x&context=3"
          >Reddit</a
        >
        about why GCC run in Docker produces around 30% smaller executable files
        than GCC run on actual Linux.<br /><br />
        <b id="Comments">Comments</b><br />
        In the version of AEC targeting x86, the comments start with
        <span class="inline_code">;</span> and end with a newline character, as
        in FlatAssembler dialect of Assembly (which ArithmeticExpressionCompiler
        primarily targets), and there are no multi-line comments. In the version
        of AEC for WebAssembly, the comments are as in C, C++ and JavaScript,
        single-line comments start with <span class="inline_code">//</span>, and
        multi-line comments start with <span class="inline_code">/*</span> and
        end with <span class="inline_code">*/</span>. Multi-line comments do not
        nest (as they do in, for example, Swift). Many people say multi-line
        comments are a bad thing because bad programmers use them for versioning
        code (which is a very bad practice). I don't think the job of the
        compiler is to enforce some particular programming style and refuse to
        compile code-smelling programs (though warnings are often useful).<br />
        <br /><b id="Constants">Constants</b><br />
        In AEC for x86, a token that consists of numbers and at most one point
        is a number, and all numbers are treated as 32-bit decimal numbers. In
        both dialects of AEC, a string is a token which starts and ends with
        <span class="inline_code">&quot;</span>, and strings are passed
        unchanged to the assembler. String tokens next to each other are
        concatenated by the tokenizer into one string (as in C and C++, in
        contrast with JavaScript). In both dialects of AEC, a token consisting
        of three characters of which both the first one and the last one are
        <span class="inline_code">'</span> is a number, and the tokenizer
        replaces it with a number equal to the ASCII code of the second
        character in that token (like in most dialects of x86 assembly). In AEC
        for WebAssembly, a token which matches the regular expression
        <span class="inline_code">"(^\\d+$)|(^0x(\\d|[a-f]|[A-F])+$)"</span> is
        of type <span class="inline_code">Integer64</span> and is passed
        unchanged to the assembler (notice that this includes hexadecimal
        numbers starting with <span class="inline_code">0x</span>, as in C, C++
        and JavaScript). A token which matches the regular expression
        <span class="inline_code">"^\\d+\\.\\d*$"</span> is of the type
        <span class="inline_code">Decimal64</span> and is also passed unchanged
        to the assembler (or, in case it is to be assigned as an initial value
        of a global variable, it is converted to IEEE754 hexadecimal). In AEC
        for x86, a token which matches the regular expression
        <span class="inline_code">"^\\d+\\.\\d*$"</span> is, just like all
        numbers, of type <span class="inline_code">Decimal32</span> and is
        always converted to IEEE754 hexadecimal (unless it's run in a JavaScript
        environment that doesn't support
        <span class="inline_code">ArrayBuffer</span>, in that case, only
        FlatAssembler can be targetted, as FlatAssembler can convert decimal
        numbers to IEEE754 hexadecimals itself). Notice that in AEC for
        WebAssembly, <span class="inline_code">3/2=1</span> (as in C, C++, Java,
        C#, Rust and Python 2.x), while, in AEC for x86,
        <span class="inline_code">3/2=1.5</span> (as in JavaScript, PHP, LISP
        and Python 3.x). It's hard to tell which approach is better, both can
        produce hard-to-find bugs. The Pascal-like approach of using different
        operators for integer division and decimal division probably makes the
        most sense, but it will also undeniably feel alien to most programmers.
        I have started a
        <a
          href="https://www.reddit.com/r/ProgrammingLanguages/comments/10rw892/is_in_your_programming_language_321_or_3215/?utm_source=share&utm_medium=web2x&context=3"
          >Reddit thread</a
        >
        about that.<br />
        <b id="multiline_strings">UPDATE</b> on 17/09/2021: The
        AEC-to-WebAssembly compiler version
        <span class="inline_code">v2.1.0</span> (not released as of the time of
        writing this, but it can be built from source) supports multi-line
        strings, the same way C++ does. An excerpt from
        <a href="multiLineStringTest.aec.html">Multi-line String Test</a>:
        <pre>
CharacterPointer first := R"(
\"Hello world!"\
)",
                 second := R"ab(
\"Hello world!"\
)ab",
                 third := R"a(
\"Hello world!"\
)a";

//Should return 1
Function multiLineStringTest() Which Returns Integer32 Does
  Return strlen(first) = strlen(second) and strlen(second) = strlen(third)
         and strlen(third) = strlen("\\\"Hello world!\"\\") + 2;
EndFunction</pre
        >
        The support for multi-line strings will probably never be added to the
        AEC-to-x86 compiler, since AEC-to-x86 compiler does not tokenize the
        whole program before compiling, but tokenizes line-by-line, so it would
        need to be significantly restructured to support multi-line-strings. I
        like the way C++ supports multi-line strings more than I like the way
        JavaScript supports them. In JavaScript, namely, multi-line strings
        begin and end with a backtick <span class="inline_code">`</span>, which
        was presumably made under the assumption that long hard-coded strings
        (for which multi-line strings are used) would never include a back-tick.
        That does not seem like a reasonable assumption. C++ allows us to
        specify which string surrounded by a closed paranthesis
        <span class="inline_code">)</span> and the quote sign
        <span class="inline_code">&quot;</span> we think will never appear in
        the text stored as a multi-line string (in the example above, those were
        an empty string in <span class="inline_code">first</span>, the string
        <span class="inline_code">ab</span> in
        <span class="inline_code">second</span>, and the string
        <span class="inline_code">a</span> in
        <span class="inline_code">third</span>), and the programmer will
        more-than-likely be right about that. Java does not support multi-line
        strings at all, supposedly to discourage hard-coding of large texts into
        a program. I think that is not the right thing to do, primarily because
        multi-line strings have many good uses: they arguably make the
        AEC-to-WebAssembly compiler, written in C++, more legible. Parser tests
        and large chunks of assembly code are written as multi-line strings
        there, and I think rightly so. I have opened a
        <a
          href="https://www.reddit.com/r/ProgrammingLanguages/comments/10oe423/how_does_your_programming_language_implement/?utm_source=share&utm_medium=web2x&context=3"
          >Reddit thread about that</a
        >.<br />
        <b>UPDATE</b> on 23/09/2021: Until the version
        <span class="inline_code">v2.1.2</span> (not released as of the time of
        writing this, but it can be built from source), there was a bug in the
        tokenizer preventing multi-line strings consisting exclusively of the
        <span class="inline_code">\</span> characters from being tokenized
        correctly.<br />
        <b id="underscores_inside_number_literals">UPDATE</b> on 22/01/2022:
        AECforWebAssembly v2.3.0 and newer will support inserting
        <span class="inline_code">_</span>-es (underscores) inside number
        literals for better legibility, like JavaScript supports. Here is an
        excerpt from <a href="birthday_paradox">Birthday Paradox</a> that
        illustrates that:
        <pre>
Integer32 nasumican_broj := 9_907;
Function nasumican_broj() Which Returns Integer16 Does
	Return nasumican_broj := mod(nasumican_broj * 48_271, 2_147_483_647);
	// Ovo radi isto što i minstd_rand radi u C++-u.
EndFunction</pre
        >
        It implements a
        <a href="http://cplusplus.com/reference/random/minstd_rand/"
          >simple pseudo-random generator</a
        >.<br />
        <br /><b id="Variables">Variable declarations</b><br />
        In the version of AEC targeting x86, there are no variable declarations
        in the language itself, the compiler simply assumes any token that
        matches the regular expression
        <span class="inline_code">"^(_|[A-Z]|[a-z])\\w*\\[?$"</span>
        and is not a keyword is a name of a variable of type 32-bit decimal
        number or 32-bit decimal number array (if it ends with
        <span class="inline_code">[</span>) that's been previously declared in
        assembly. In the version of AEC targeting WebAssembly, variables are
        declared with:
        <pre>DataType name_of_the_variable;</pre>
        Where <span class="inline_code">DataType</span> is
        <span class="inline_code">Character</span>,
        <span class="inline_code">CharacterPointer</span>,
        <span class="inline_code">Integer16</span>,
        <span class="inline_code">Integer16Pointer</span>,
        <span class="inline_code">Integer32</span>,
        <span class="inline_code">Integer32Pointer</span>,
        <span class="inline_code">Decimal32</span>,
        <span class="inline_code">Decimal32Pointer</span>,
        <span class="inline_code">Decimal64</span> or
        <span class="inline_code">Decimal64Pointer</span>. (<i
          ><b>UPDATE</b> on 28/09/2021: Since AECforWebAssembly
          <span class="inline_code">v2.2.0</span> (not released as of the time
          of writing this), you can write
          <span class="inline_code">PointerToCharacter</span> instead of
          <span class="inline_code">CharacterPointer</span>,
          <span class="inline_code">PointerToInteger32</span> instead of
          <span class="inline_code">Integer32Pointer</span>, and so on. I think
          <span class="inline_code">PointerToCharacter</span> is a name that is
          far harder to misinterpret, as somebody might think
          <span class="inline_code">CharacterPointer</span> is a character that
          is also a pointer.</i
        >) The compiler assumes the pointers are 32-bit and characters are
        8-bit, which is true in the vast majority of cases. There is also a way
        to initialize a variable:
        <pre>DataType name_of_the_variable := initial_value;</pre>
        Without that, global variables are zero by default, and local variables
        contain whatever happens to be on the top of the system stack at the
        time of their declarations (as in C or C++). In Ada and old versions of
        C, variables must be declared on the top of a scope, before any other
        statement. There is no such restriction in AEC. However, the initial
        values to global variables must be compile-time constants. That means,
        you can't refer to other global variables or to AEC functions. However,
        when writing an initial value for a decimal variable, you can use C
        library (available to the compiler) functions and constants, such as
        <span class="inline_code">sin(x)</span>,
        <span class="inline_code">asin(x)</span>,
        <span class="inline_code">atan2(y,x)</span>,
        <span class="inline_code">pi</span> or
        <span class="inline_code">e</span>. The same doesn't work when assigning
        initial values to local variables. It's possible to declare multiple
        variables of the same type in the same statement by separating them with
        a comma <span class="inline_code">,</span> (as in C, C++ and
        JavaScript). For example (excerpt from the
        <a href="dragonCurve.html">Dragon Curve</a>):
        <pre>
Integer32 directionX[4]    := { 0, 1, 0, -1},
          directionY[4]    := {-1, 0, 1,  0},
          currentX         := 10,
          currentY         := 250 + 490 - 410, //When set on 250, the turtle
                                               //reaches 410 and then turns
                                               //back (I know this by
                                               //experimenting).
          currentDirection := 0,
          lineLength       := 5,
          lineWidth        := 2,
          currentStep      := 0;
        </pre>
        I like the C-like approach to declaring multiple variables in the same
        statement way more than the Ada-and-VHDL-like approach, yet alone the
        Rust-like approach. I realize the Rust-like approach makes theoretically
        much more sense, but it definitely feels weird to somebody coming from
        another programming language.<br />
        <b>TODO</b>: Decide what to do about aligning the variables in memory
        (making sure that, for example, a
        <span class="inline_code">Integer32</span> is on the memory location
        divisible by 4). Aligning variables wastes memory, sometimes around half
        of the allocated memory ends up unused because of the aligning. On the
        other hand, for the interoperability with other languages, it is
        probably desirable for variables and arrays to be aligned. JavaScript
        throws an exception on attempted unaligned access, while in C and C++,
        it is supported by some compilers and optimization levels but not in
        others (it's undefined behavior). Right now, the AEC compiler doesn't
        make sure the variables are aligned, which I am not sure is the best
        approach. Also, while JavaScript Virtual Machine does allow unaligned
        memory access, it's not guaranteed to be nearly as fast as aligned
        access (on x86, it usually is, on ARM, it's many times slower).<br />
        <br /><b id="Arrays">Arrays and Pointers</b><br />
        In the x86 dialect of AEC, you don't declare arrays in AEC, the compiler
        assumes any arrays you mention in AEC are declared in inline assembly
        (just like it does for variables). In the x86 dialect of AEC, you can
        reference an array called <span class="inline_code">fib</span> either as
        <span class="inline_code">fib(0)</span> (as in BASIC) or as
        <span class="inline_code">fib[0]</span> (as in C). In the WebAssembly
        dialect of AEC, you can only do that as
        <span class="inline_code">fib[0]</span>.<br />
        In the WebAssembly dialect of AEC, arrays are declared as follows:
        <pre>DataType name_of_the_array[size];</pre>
        They can be initialized as follows:
        <pre>
DataType name_of_the_array[size] := {first_element, second_element...};</pre
        >
        Note that, unlike in C, if you put only one element in the initializer
        list (between <span class="inline_code">{</span> and
        <span class="inline_code">}</span>), only the first element is
        initialized with that value, while others are left uninitialized (or
        are, in the case of global variables, set to zero). Makes a lot more
        sense to me than those complicated rules C and C++ have for initializing
        arrays. In C and C++, you can use array-style syntax with pointers or
        pointer-style syntax with arrays most of the time, except in some
        confusing scenarios. In AEC, you can never do those things. To the AEC
        compiler, the array is named
        <span class="inline_code">name_of_the_array[</span> rather than
        <span class="inline_code">name_of_the_array</span>, and attempting to
        use <span class="inline_code">name_of_the_array</span> to refer to the
        pointer to the first element of the array (as you can usually do in C or
        C++) leads to "undeclared variable" error (since the compiler is using
        <a
          href="https://github.com/FlatAssembler/AECforWebAssembly/blob/644f80b37a6d1233cb6c440aa877504ce9a46a98/TreeNode.cpp#L117"
          >Levenshtein Distance</a
        >
        to provide suggestions for misspelled variable names, it will almost
        certainly suggest you the array name then, with the
        <span class="inline_code">[</span> at the end, since it will have the
        Levnstein Distance of <span class="inline_code">1</span>). This can be
        confusing to those who come from C or C++, but it makes a lot more sense
        to me. Or, you can make it behave in the C-like manner (if it makes your
        code shorter) like this (excerpt from the
        <a href="analogClock.html">Analog Clock in AEC</a>):
        <pre>
    Character signature[100] := {0};
    CharacterPointer signature := AddressOf(signature[0]);
    //AEC, unlike C, always makes a clear distinction between
    //arrays and pointers.
    logString("Empty signature has length of: ");
    logInteger(strlen(signature));
    logString("\n");
    strcat(signature, " Analog Clock for WebAssembly\n");</pre
        >
        To get or assign the value to the thing a pointer points to, you use the
        <span class="inline_code">ValueAt(</span> operator, like this (excerpt
        from
        <a
          href="https://github.com/FlatAssembler/AECforWebAssembly/tree/master/HybridSort"
        >
          HybridSort in AEC </a
        >):
        <pre>
      ValueAt(originalni_niz + donja_granica) :=
                ValueAt(originalni_niz + donja_granica + 1);</pre
        >
        Makes a lot more sense to me than to use the same operator as for the
        multiplication, like C or C++ do (they use
        <span class="inline_code">*</span> for both of those things). Using the
        same operator for declaring a pointer as for multiplication in fact
        makes C and C++ significantly more difficult to parse in some cases,
        this is called the <i>typedef problem</i>. In C and C++, the statement
        <span class="inline_code">first * second;</span> can mean both &quot;<i
          >Declare a pointer to the type named
          <span class="inline_code">first</span>, and name that pointer
          <span class="inline_code">second</span>.</i
        >&quot; and the far less sensible statement &quot;<i
          >Multiply variables named <span class="inline_code">first</span> and
          <span class="inline_code">second</span>, store the result on the
          system stack and then ignore it.</i
        >&quot;, depending on the context (whether
        <span class="inline_code">first</span> is a name of a type or a name of
        a variable, which one cannot know during the parsing phase of
        compiling). In the dialect of AEC targeting x86, it can only mean the
        second one (with the modification that the result is not stored on the
        system stack, but to a memory location where the pointer
        <span class="inline_code">result</span>, which is supposed to be
        declared in inline assembly, points to), and, in the dialect of AEC
        targeting WebAssembly, the compiler complains if you write something
        like that because WebAssembly itself does not let you store a result on
        system stack and then pretend it is not there, that is, it does not
        support expressions which are not assigned to anything. To get a pointer
        to something, you use the
        <span class="inline_code">AddressOf(</span> operator. Makes a lot more
        sense to me than the way C and C++ do that, using the same operator as
        for the <i>bitwise and</i> operation (they use
        <span class="inline_code">&amp;</span>). AEC for x86 doesn't support
        pointers at all. Note that, like in C and C++ (but unlike in JavaScript
        or Assembly),
        <span class="inline_code"
          >name_of_some_integer32pointer := name_of_some_integer32pointer +
          1</span
        >
        increases the value stored in it by 4 (the size of
        <span class="inline_code">Integer32</span>), rather than by 1.<br />
        <b>TODO</b>: Implement the multi-dimensional arrays. But let's not use
        the JavaScript-like approach to them, JavaScript really sucks in that
        regard. For now, only
        <del
          >local (not yet global, the compiler
          <a href="https://github.com/FlatAssembler/AECforWebAssembly/issues/17"
            >crashes</a
          >
          if you try to do that)</del
        >
        (<i
          >UPDATE: AECforWebAssembly
          <span class="inline_code">v2.4.0</span> supports both global and local
          two-dimensional arrays of characters</i
        >) two-dimensional arrays of characters are supported, like this
        (excerpt from <a href="roman_numerals">Roman Numerals</a>):
        <pre>
    CharacterPointer elements[13] :=    {"I",  "IV", "V",
                                         "IX", "X",  "XL",
                                         "L",  "XC", "C",
                                         "CD", "D",  "CM",
                                         "M"};
    Integer16 meaningsOfElements[13] := {1,   4,   5,
                                         9,   10,  40,
                                         50,  90,  100,
                                         400, 500, 900,
                                         1000};</pre
        >
        <b>UPDATE</b> on 10/04/2023: For now, if you need to implement an
        algorithm that uses multi-dimensional arrays, you can write it in a
        relatively-legible manner by writing helper functions. I was doing that
        when writing <a href="hurwitz.html">Hurwitz'es Algorithm</a>:
        <pre>
Function f(Integer16 i, Integer16 j) Which Returns Integer16 Does
  // Za pretvaranje indeksa dvodimenzionalnog polja u indeks jednodimenzionalnog
  // polja. Kada u svoj AEC compiler još nisam implementirao dvodimenzionalna
  // polja...
  Return 20 * i + j;
EndFunction</pre
        >
        And, after that...
        <pre>
        matrica[f(i, j)] := (matrica[f(i - 1, 0)] *
                            (j + 1 < broj_stupaca ?
                             matrica[f(i - 2, j + 1)] : 0) -
                            (matrica[f(i - 2, 0)] *
                            (j + 1 < broj_stupaca ?
                             matrica[f(i - 1, j + 1)] : 0))) /
                            matrica[f(i - 1 , 0)];
</pre
        >
        <br />
        <br /><b id="Assignments">Assignments</b><br />
        For assignments, you use <span class="inline_code">:=</span> operator,
        in both dialects of AEC. In the AEC for WebAssembly, you can nest
        assignment expressions, like this (excerpt from HybridSort):
        <pre>
    broj_obrnuto_poredanih_podniza  :=
        broj_vec_poredanih_podniza  :=
        broj_pokretanja_QuickSorta  :=
        broj_pokretanja_MergeSorta  :=
        broj_pokretanja_SelectSorta := 0;</pre
        >
        After that, all 5 variables will be 0. You can't do that in AEC for x86.
        In AEC for WebAssembly, assignment statements end with a semicolon
        <span class="inline_code">;</span> and can run across multiple lines. In
        AEC for x86, they end with a newline character. In AEC for x86, there is
        also the string-assignment operator
        <span class="inline_code">&lt;=</span> (similar to the difference
        between signal and variable assignments in VHDL). In AEC for
        WebAssembly, you use <span class="inline_code">:=</span> for string
        assignments.<br />
        <b>TODO</b>:
        <del
          >Implement the assignment operators
          <span class="inline_code">+=</span>,
          <span class="inline_code">-=</span> and related ones as they are in C,
          C++ and JavaScript. They can make code significantly shorter.</del
        >
        (<i>UPDATE on 14/09/2020: They have been implemented.</i>)(<i
          ><del
            >UPDATE on 23/01/2022: Actually, they are implemented incorrectly,
            see
            <a
              href="https://github.com/FlatAssembler/AECforWebAssembly/issues/15"
              >this GitHub issue</a
            >
            for more information.</del
          ></i
        >)(<i
          >UPDATE on 24/01/2022: I believe I have
          <a
            href="https://github.com/FlatAssembler/AECforWebAssembly/commit/8741538465d2e7ecfe27382fda54b98665326411"
            >fixed that issue</a
          >.</i
        >)<br />
        <b>UPDATE</b> on 15/07/2021: In most programming languages these days,
        the assignment operator is <span class="inline_code">=</span>, whereas
        the equality-testing operator is <span class="inline_code">==</span>.
        The rationale for that, dating back to the C programming language, is
        that most programs more commonly do variable assignments than they do
        testing for equality between variables, so that it makes sense to use a
        shorter operator for a more common operation that is assignment. While
        that may have made sense back then, I don't think that makes any sense
        with modern computers. Beginners in programming are in particular often
        confused by <span class="inline_code">=</span> meaning assignment,
        rather than something they are used to from mathematics. Also, I believe
        everybody who has programmed in a C-like language can agree that thing
        about equality operator being two assignment operators often leads to
        bugs. Namely, one of the most common errors in C-like languages is that
        the programmer mistypes
        <span class="inline_code">if (variable==0)</span> as
        <span class="inline_code">if (variable=0)</span>, leading to the value
        in <span class="inline_code">variable</span> being lost and the block of
        code after that <span class="inline_code">if</span> never being
        executed. C# attempts to solve that problem by disallowing implicitly
        converting to the boolean type in the if-conditions, which is an
        interesting solution, but it often makes the code longer, as well as not
        addressing the fact that the same problem can happen with boolean
        variables. So, I think that making
        <span class="inline_code">:=</span> the assignment operator and
        <span class="inline_code">=</span> the equality-testing operator is a
        good choice. The AEC-to-WebAssembly compiler allows whitespace between
        <span class="inline_code">:</span> and
        <span class="inline_code">=</span> in the assignment operator
        <span class="inline_code">:=</span>, so that, when
        <a href="https://clang.llvm.org/docs/ClangFormat.html">ClangFormat</a>
        mistakes <span class="inline_code">:</span> for the label-ending sign
        and puts a whitespace after it, the code does not lose its meaning. I am
        not sure now whether that was a good choice. I have created a
        <a
          href="https://www.reddit.com/r/ProgrammingLanguages/comments/10zoo7t/if_your_programming_language_has/?utm_source=share&utm_medium=web2x&context=3"
          >Reddit thread</a
        >
        about it, as well as a
        <a href="https://langdev.stackexchange.com/q/1695/330"
          >StackExchange thread about how to explain to ClangFormat that
          <span class="inline_code">:=</span> is the assignment operator</a
        >.<br />
        <br /><b id="Operators">Operators</b><br />
        AEC has the following operators:<br />
        <table>
          <tr>
            <th>Priority</th>
            <th>Associativity</th>
            <th>Operators</th>
          </tr>
          <tr>
            <td>1</td>
            <td>left</td>
            <td>
              <span class="inline_code">.</span>
              <span class="inline_code">-&gt;</span>
            </td>
          </tr>
          <tr>
            <td>2</td>
            <td>left</td>
            <td>
              <span class="inline_code">*</span>
              <span class="inline_code">/</span>
            </td>
          </tr>
          <tr>
            <td>3</td>
            <td>left</td>
            <td>
              <span class="inline_code">-</span>
              <span class="inline_code">+</span>
            </td>
          </tr>
          <tr>
            <td>4</td>
            <td>left</td>
            <td>
              <span class="inline_code">&lt;</span>
              <span class="inline_code">&gt;</span>
              <span class="inline_code">=</span>
            </td>
          </tr>
          <tr>
            <td>5</td>
            <td>left</td>
            <td>
              <span class="inline_code">and</span> (in the x86 dialect:
              <span class="inline_code">&amp;</span>)
            </td>
          </tr>
          <tr>
            <td>6</td>
            <td>left</td>
            <td>
              <span class="inline_code">or</span> (in the x86 dialect:
              <span class="inline_code">|</span>)
            </td>
          </tr>
          <tr>
            <td>7</td>
            <td>right</td>
            <td>
              <span class="inline_code">?:</span> (ternary conditional operator)
            </td>
          </tr>
          <tr>
            <td>8</td>
            <td>right</td>
            <td><span class="inline_code">:=</span> (assignment operator)</td>
          </tr>
        </table>
        <i
          >(UPDATE on 07/10/2020: The operators
          <span class="inline_code">.</span> and
          <span class="inline_code">-&gt;</span> have the same meaning they do
          in C, dealing with structures and structure pointers.)</i
        >
        The first argument of the ternary conditional operator is converted to
        <span class="inline_code">Integer32</span> (that's how WebAssembly
        represents Booleans), and the last two are converted to strongest type
        of those two (<i
          >UPDATE: In AECforWebAssembly v2.6.0 and newer, in case one of the
          last two arguments of the ternary conditional operator is a structure,
          but the other is either a structure of a different type, or not a
          structure at all, the semantic analyzer reports an error. In previous
          versions of AECforWebAssembly, that caused the compiler to crash. See
          <a href="https://github.com/FlatAssembler/AECforWebAssembly/issues/19"
            >this GitHub issue</a
          >
          for more information.</i
        >). The strongest types are pointers, next comes
        <span class="inline_code">Decimal64</span>, then
        <span class="inline_code">Decimal32</span>, then
        <span class="inline_code">Integer64</span>, then
        <span class="inline_code">Integer32</span>, then comes
        <span class="inline_code">Integer16</span>, while the weakest type is
        <span class="inline_code">Character</span>. Most binary operands convert
        both of their operands to the stronger type, except for the assignment
        operator, the <span class="inline_code">and</span> and
        <span class="inline_code">or</span> operator. The assignment operator
        converts the right-hand side operand to the type of the left-hand-side
        operand. In case one of them is a pointer and the other one isn't, the
        compiler issues a warning. The bitwise
        <span class="inline_code">and</span> and
        <span class="inline_code">or</span> convert both operands to
        <span class="inline_code">Integer32</span>. There are no logical
        <span class="inline_code">and</span> and
        <span class="inline_code">or</span> operators in AEC (like the C and C++
        <span class="inline_code">and</span> and
        <span class="inline_code">or</span> or
        <span class="inline_code">&amp;&amp;</span> and
        <span class="inline_code">||</span>). This can lead to some confusing
        behavior. For instance, <span class="inline_code">1 and 2</span> would
        be <span class="inline_code">1</span> in C and C++, but it's
        <span class="inline_code">0</span> in AEC. To convert a number to
        Boolean, you can use the built-in function
        <span class="inline_code">not(x)</span>, like this (from HybridSort):
        <pre>
        velicina_niza / (64 * 1024 / 4) +
        not(not(mod(velicina_niza, 64 * 1024 / 4))) &gt;
        prijasnja_velicina_niza / (64 * 1024 / 4) +
        not(not(mod(prijasnja_velicina_niza, 64 * 1024 / 4))) or
        prijasnja_velicina_niza = 0</pre
        >
        Namely, <span class="inline_code">not(not(x))</span> returns
        <span class="inline_code">1</span> if
        <span class="inline_code">x</span> is not
        <span class="inline_code">0</span>, and
        <span class="inline_code">0</span> if
        <span class="inline_code">x=0</span>. You can also use
        <span class="inline_code">not(x=0)</span>. There is no built-in
        <a href="https://en.wikipedia.org/wiki/Exclusive_or">exclusive or</a>
        function or operator in AEC, but you can easily build one like this
        (excerpt from
        <a href="arithmeticOperatorsTest.html">Arithmetic Operators Test</a>):
        <pre>
Function xor(Integer32 first,
             Integer32 second)
     Which Returns Integer32 Does
        //I hope people will like the way I named the bit-operators.
        Return (first and invertBits(second)) or (invertBits(first) and second);
EndFunction</pre
        >
        As you can see, there is a built-in
        <span class="inline_code">invertBits(Integer32 x)</span> function which
        inverts the bits in an integer. Internally, it
        <span class="inline_code">xor</span>-s
        <span class="inline_code">x</span> with
        <span class="inline_code">-1</span>.<br />
        <b>TODO</b>: Implement a less-than-or-equal-to operator
        <span class="inline_code">&lt;=</span> and a greater-than-or-equal-to
        operator <span class="inline_code">&gt;=</span>. For that, we will need
        to modify both the tokenizer, the parser and the compiler.<br />
        <br /><b id="Branching">Branching</b><br />
        Branching is supported only via <span class="inline_code">If</span>,
        <span class="inline_code">If</span>-<span class="inline_code">Else</span
        >, and <span class="inline_code">If</span>-<span class="inline_code"
          >ElseIf</span
        >-<span class="inline_code">Else</span>. There is no equivalent of C,
        C++ and JavaScript <span class="inline_code">switch</span>-<span
          class="inline_code"
          >case</span
        >. After the <span class="inline_code">If</span> token, the compiler
        expects a condition. In AEC for WebAssembly, the condition ends with a
        <span class="inline_code">Then</span>, while, in AEC for x86, the
        condition ends with a newline character. The branching ends with
        <span class="inline_code">EndIf</span>. That's to make the program
        easier to parse, and to prevent
        <a href="https://en.wikipedia.org/wiki/Dangling_else">dangling-else</a>.
        Between <span class="inline_code">Then</span> and
        <span class="inline_code">EndIf</span>, there can be an
        <span class="inline_code">Else</span> token. Before the
        <span class="inline_code">Else</span> token (if there is one, otherwise
        it's before the <span class="inline_code">EndIf</span>) there can be an
        <span class="inline_code">ElseIf</span> token. An
        <span class="inline_code">ElseIf</span> token, much like the
        <span class="inline_code">If</span> token, is followed by an expression
        representing a condition, which is ended by the
        <span class="inline_code">Then</span> token. After the
        <span class="inline_code">Then</span> token and after the
        <span class="inline_code">Else</span> token, you can put an
        <span class="inline_code">{</span> (curly brace) which the compiler will
        ignore. Similarly, you can put an
        <span class="inline_code">}</span> before
        <span class="inline_code">EndIf</span>,
        <span class="inline_code">ElseIf</span> and
        <span class="inline_code">Else</span>. That is to make it easier to use
        text editors made primarily for C like languages for writing AEC (to
        jump to the end of the code block, for example). An example from the
        Analog Clock in AEC:
        <pre>
        If signature[j] = '\n' Then
            i := (i / windowWidth + 1) * windowWidth;
        ElseIf not(signature[j] = 0) Then
            output[i] := signature[j];
            colors[i] :=   modraColor;
            i         :=        i + 1;
        Else
            output[i] := ' ';
        EndIf</pre
        >
        If there is an <span class="inline_code">ElseIf</span> token inside the
        <span class="inline_code">If</span>-statement, there, of course, doesn't
        need to be an <span class="inline_code">Else</span> token:
        <pre>
            If j &lt; 2 and (output[i - windowWidth] = 'x' and
                (output[i + 1] = 'x' or output[i - 1] = 'x')) Then
                output[i] :=            'x';
                colors[i] := darkGreenColor;
            ElseIf j=2 and (output[i + 1]=' ' and
                output[i - windowWidth] = 'x') Then
                output[i] := ' ';
            EndIf</pre
        >
        Note that, unlike in Ada or VHDL, there is no semicolon after the
        <span class="inline_code">EndIf</span> token. That is, you can put the
        semicolon <span class="inline_code">;</span> after
        <span class="inline_code">EndIf</span> if you want to, but you do not
        have to. I often put it so that ClangFormat does not get confused. When
        programming in VHDL, Ada or Pascal, it bothered me why I needed to put a
        semi-colon after <span class="inline_code">end if</span> (ADA and VHDL)
        or <span class="inline_code">end</span> (Pascal). I mean,
        <span class="inline_code">EndIf</span> by itself means an end of a
        statement, so why put another sign for ending a statement there? Is not
        it some kind of a pleonasm? I have asked a
        <a
          href="https://www.quora.com/Why-does-Pascal-require-a-semi-colon-after-end-and-Ada-and-VHDL-require-it-after-end-if-and-end-loop-Is-not-it-a-pleonasm-My-programming-language-allows-after-EndIf-and-EndWhile-but-it-does-not-require-it"
          >Quora question</a
        >
        about that (apparently, it is to make recovery from parsing errors
        easier), and have created a
        <a
          href="https://www.reddit.com/r/ProgrammingLanguages/comments/10odou9/how_exactly_does_requiring_a_semicolon_after/?utm_source=share&utm_medium=web2x&context=3"
          >Reddit thread</a
        >, as well as a
        <a href="https://languagedesign.stackexchange.com/q/392/330"
          >StackExchange question</a
        >
        about that.<br />
        Simple branching can also be done using the
        <span class="inline_code">?:</span> operator. As it is
        right-associative, it can be used to concisely write
        <span class="inline_code">ElseIf</span> statements. An example of that
        from Arithmetic Operators Test (one of the first programs I wrote in AEC
        for WebAssembly):
        <pre>
Function signum(Integer32 number) Which Returns Integer32 Does
    /*
     * The ternary conditional operator "?:" is right-associative,
     * as it is in C, C++ and JavaScript (unlike in PHP), which
     * makes it easy to abbreviate else-if statements using it.
     * And, as of time of writing this, I haven't yet implemented
     * the "If" statement into the AEC-to-WebAssembly compiler.
     */
    Return (number&lt;0)? //If the number is less than 0...
                    -1 //signum of that number is -1...
                     : //else...
                     (number=0)? //if the number is 0...
                               0 //signum of that number is 0.
                               : //else...
                               1; //The signum of that number is 1.
EndFunction</pre
        >
        In AEC for x86, the condition after
        <span class="inline_code">ElseIf</span> ends with a newline, rather than
        with a <span class="inline_code">Then</span> token.<br />
        <b>TODO:</b> Implement something like
        <span class="inline_code">switch</span>-<span class="inline_code"
          >case</span
        >, to make it easier to write long
        <span class="inline_code">ElseIf</span> branchings. Most of the time,
        they are a sign of bad code design, but sometimes they are not, and it's
        not acceptable for a language to discourage them.<br />
        <b id="ternary_operator_bug">UPDATE</b> on 09/07/2021: A
        <a href="https://stackoverflow.com/a/62104607/8902065"
          >StackOverflow user called <i>rici</i> warned me</a
        >
        that AEC-to-x86 compiler actually produces incorrect code for the
        <span class="inline_code">?:</span> operator. Namely, the code it
        produces calculates the results of the second operand and the third
        operand before calculating the result of the first operand (the
        condition), which can, according to that <i>rici</i>, lead to unexpected
        divide-by-zero errors for expressions such as
        <span class="inline_code">d = 0 ? 0 : n / d</span> (if
        <span class="inline_code">d</span> is equal to zero). There does not
        seem to be a simple solution, given the way my AEC-to-x86 compiler is
        structured. Here is the
        <a
          href="https://github.com/FlatAssembler/ArithmeticExpressionCompiler/blob/3530fabc2fc403c70cee5d34ad13aafdeeb87f6a/compiler.html#L860"
          >code with which the ternary operator is implemented in the AEC-to-x86
          compiler</a
        >. The AEC-to-WebAssembly compiler is a lot more professionally made (I
        made the core of it when I was 20, while I made the core of the
        AEC-to-x86 compiler back when I was 18) and it does not suffer from that
        problem. It is also easier to implement the ternary operator when
        targetting WebAssembly than when targetting x86 because WebAssembly
        itself essentially has the ternary operator just with a different
        (LISP-like) syntax. Here is
        <a
          href="https://github.com/FlatAssembler/AECforWebAssembly/blob/38ceebb9ae27a70a6e864a2fe78961fffb5e2fd4/compiler.cpp#L1149"
          >how I implemented the ternary conditional operator in the
          AEC-to-WebAssembly compiler</a
        >.<br />
        So, as far as I can see, you can run into at least two problems when
        implementing the <span class="inline_code">?:</span> operator in your
        language. PHP incorrectly parses it, my AEC-to-x86 compiler incorrectly
        compiles it... I've asked a
        <a
          href="https://www.reddit.com/r/ProgrammingLanguages/comments/10rxexc/did_you_correctly_implement_the_operator_the/?utm_source=share&utm_medium=web2x&context=3"
          >question on Reddit</a
        >
        and a
        <a href="https://languagedesign.stackexchange.com/q/1469/330"
          >question on StackExchange</a
        >
        to see if there are some more (Apparently, there is, and I bumped into
        <a href="https://github.com/FlatAssembler/AECforWebAssembly/issues/19"
          >one of them related to structures</a
        >
        that <i>kaya3</i> warns about on StackExchange when making my
        AEC-to-WebAssembly compiler. What is exceptionally bad is that the error
        message is very misleading, and, right now, it escapes me what exactly
        is going on in the compiler. How can using two different structure types
        inside a <span class="inline_code">?:</span> operator lead to the
        &quot;<i
          >Some part of the compiler tried to compile the array with a negative
          size.</i
        >&quot; error? Well, it has been 3 years since I wrote the core of that
        compiler, so no wonder I don't remember the details of how it works. (<i
          >UPDATE: I have diagnozed the problem. It is actually two different
          bugs, one in the compiler and one in the semantic analyzer. The
          problem is fixed in AECforWebAssembly v2.6.0 (not released as of time
          of writing this, but you have the source code on GitHub, GitLab and
          SourceForge). I have started a forum thread about absurd error
          messages on
          <a href="https://www.forum.hr/showthread.php?p=98705609">forum.hr</a>,
          <a
            href="https://www.reddit.com/r/ProgrammingLanguages/comments/146au5t/what_is_the_most_absurd_error_message_your/?utm_source=share&utm_medium=web2x&context=3"
            >r/ProgrammingLanguages</a
          >,
          <a href="https://atheistforums.org/thread-65066.html"
            >Atheist Forums</a
          >
          and
          <a
            href="https://www.reddit.com/r/CroIT/comments/1476547/koja_je_najapsurdnija_poruka_o_pogrešci_koju_je/?utm_source=share&utm_medium=web2x&context=3"
            >r/CroIT</a
          >.</i
        >)).<br />
        <b id="left_hand_side_conditional_operator">UPDATE</b> on 10/09/2021: I
        have decided to add the left-hand-side ternary conditional operator in
        assignments, which exists in C++, to my programming language (for now,
        and presumably forever, only in the AEC-to-WebAssembly compiler in the
        version <span class="inline_code">v2.0.0</span> and newer, not in the
        no-longer-maintained AEC-to-x86 compiler). Sometimes, it can make the
        code shorter, and it looks very cool. An excerpt from
        <a href="leftHandSideConditionalTest.aec.html"
          >Left Hand Side Conditional Test</a
        >
        which illustrates it by implementing the original Euclid's Algorithm
        (which uses subtraction) using it:
        <pre>
Function gcd(Integer32 a, Integer32 b) Which Returns Integer32 Does
	While b > 0 Loop
		((a > b) ? a : b) := ((a > b) ? (a - b) : (b - a));
		/*
		 * The compiler should transform the line above to:
		 *	```
		 *	If a > b Then
		 *		a := ((a > b) ? (a - b) : (b - a));
		 *		// a := a - b;
		 *	Else
		 *		b := ((a > b) ? (a - b) : (b - a));
		 *		// b := b - a;
		 *	EndIf
		 *	```
		 */
	EndWhile
	Return a;
EndFunction</pre
        >
        Even in C++, it is generally agreed upon that using the conditional
        operator on the left-hand side of the assignment is very bad style which
        makes programs unnecessarily more difficult to read, and JavaScript does
        not allow it at all. Nevertheless, I think allowing it is not
        fundamentally different from allowing the conditional operator on the
        right-hand-side and other expressions.<br />
        <b>UPDATE</b> on 13/09/2021: As I have mentioned on
        <a
          href="https://discord.com/channels/530598289813536771/847014270922391563/886245635882369034"
          >Discord</a
        >, the behaviour of the left-hand-side ternary conditional operator in
        AEC does not exactly match the behaviour of left-hand-side ternary
        conditional operator in C++, and I think the behaviour in AEC is better.
        In C++, the following program compiles:
        <pre
          class="cxx_program"
        ><span class="PreProc">#include </span><span class="Constant">&lt;iostream&gt;</span>

<span class="Statement">using</span> <span class="Type">namespace</span> std;

<span class="Type">int</span> main() {
        <span class="Type">int</span> a=<span class="Constant">15</span>;
        <span class="Type">int</span> b=<span class="Constant">25</span>;
        <span class="Statement">while</span> (b&gt;<span class="Constant">0</span>)
                ((a&gt;b)?a:b)=((a&gt;b)?(a-b):(b-a));
        cout &lt;&lt;a &lt;&lt;endl;
}</pre>
        However, this program refuses to compile with some confusing error
        message:
        <pre
          class="cxx_program"
        ><span class="PreProc">#include </span><span class="Constant">&lt;iostream&gt;</span>

<span class="Statement">using</span> <span class="Type">namespace</span> std;

<span class="Type">int</span> main() {
        <span class="Type">int</span> a=<span class="Constant">15</span>;
        <span class="Type">float</span> b=<span class="Constant">25</span>;
        <span class="Statement">while</span> (b&gt;<span class="Constant">0</span>)
                ((a&gt;b)?a:b)=((a&gt;b)?(a-b):(b-a));
        cout &lt;&lt;a &lt;&lt;endl;
}</pre>
        The only difference between those two programs is whether we declare the
        variable <span class="inline_code">b</span> as
        <span class="inline_code">float</span> (equivalent to AEC
        <span class="inline_code">Decimal32</span>) or as
        <span class="inline_code">int</span> (on most compilers, that is
        equivalent to AEC <span class="inline_code">Integer32</span>). Compilers
        will refuse to compile the second program with some error message from
        which it is not obvious that the issue will be solved by changing
        <span class="inline_code">float</span> to
        <span class="inline_code">int</span>. In my opinion, that is hardly
        acceptable, and the AEC-to-WebAssembly compiler accepts the equivalents
        of both programs.<br />
        <br /><b id="Loops">Loops</b><br />
        For now, there is only one type of loop in AEC, the
        <span class="inline_code">While</span>-loop. A
        <span class="inline_code">While</span> token is followed by an
        expression representing a condition. That expression ends with a newline
        character in AEC for x86, and with a
        <span class="inline_code">Loop</span> token in AEC for WebAssembly. In
        both of them, the <span class="inline_code">While</span>-statement ends
        with an <span class="inline_code">EndWhile</span> token. For example,
        here is what the
        <a href="https://en.wikipedia.org/wiki/Euclidean_algorithm">
          Euclid Algorithm</a
        >
        looks like in AEC for WebAssembly (an excerpt from
        <a href="euclidTest.html">Euclid Test</a>):
        <pre>
    While not(b=0) Loop
        If a&gt;b Then
            a:=mod(a,b);
        Else
            If a=0 Then
                Return b;
            EndIf
            b:=mod(b,a);
        EndIf
    EndWhile</pre
        >
        It uses the built-in function
        <span class="inline_code">mod(Integer64 a, Integer64 b)</span> to get
        the remainder of the division. AEC for x86 supports it both for integers
        and decimal numbers, whereas AEC for WebAssembly supports it only for
        integers (for the simple reason that WebAssembly doesn't support it for
        decimal numbers either). Nevertheless, there is a simple way to write it
        yourself in AEC for WebAssembly (excerpt from the Analog Clock):
        <pre>
Function fmod(Decimal32 a, Decimal32 b) Which Returns Decimal32 Does
    Return a - b * Integer32(a / b);
EndFunction</pre
        >
        It might actually be a good idea to use
        <span class="inline_code">Integer64(</span> instead of
        <span class="inline_code">Integer32(</span>, because there is no
        guarantee that <span class="inline_code">a / b</span> will be in the
        range of <span class="inline_code">Integer32</span>. So, that's how you
        do casting in AEC, with the built-in functions named
        <span class="inline_code">DataType(</span>.<br />
        <b>TODO:</b> Think of some nice syntax for the
        <span class="inline_code">for</span>-loop, every remotely modern
        language has a <span class="inline_code">for</span>-loop. Also,
        implement something like C, C++ and JavaScript
        <span class="inline_code">break</span> and
        <span class="inline_code">continue</span>. Most of the time, they are a
        sign of bad code design, but sometimes they aren't, and it's not
        acceptable for a language to discourage them.<br />
        <br /><b id="Functions">Functions</b><br />
        AEC for x86 supports no user-added functions. Furthermore, the parser
        implemented there doesn't support functions with more than 2 arguments.
        AEC for WebAssembly supports functions, because WebAssembly makes it
        easy to implement them (x86 assembly doesn't have a standardized way to
        call functions, the way it's done varies by operating system). Importing
        functions from JavaScript is done like this (excerpt from Analog Clock):
        <pre>
//Let's import some functions useful for debugging from JavaScript...
Function logString(CharacterPointer str) Which Returns Nothing Is External;
Function logInteger(Integer32 int) Which Returns Nothing Is External;</pre
        >
        So, function declaration starts with a
        <span class="inline_code">Function</span> token. After it, comes a
        function name (ending with an open parenthesis
        <span class="inline_code">(</span>). After that, comes the list of
        arguments (it may be empty, and it often is). An element of that list
        consists of an argument type and an argument name. Unlike in C, argument
        name is obligatory and the parser is going to complain if you don't
        insert it. And there doesn't appear to be a simple way to change that.
        Arguments are separated by a colon token
        <span class="inline_code">,</span>. After that comes a
        <span class="inline_code">Which</span> token, after which comes a
        <span class="inline_code">Returns</span> token. Then comes a return type
        (which can be a data type or <span class="inline_code">Nothing</span>).
        If the function is being imported from JavaScript, then comes the
        <span class="inline_code">Is</span>-token,
        <span class="inline_code">External</span>-token and a semicolon. If the
        function is implemented in AEC, there comes the
        <span class="inline_code">Does</span>-token, then comes the function
        body which ends with the <span class="inline_code">EndFunction</span>
        token. A function exits when the control flow reaches the
        <span class="inline_code">EndFunction</span>-token or when it reaches a
        <span class="inline_code">Return</span>-statement. If the function
        returns <span class="inline_code">Nothing</span>, a
        <span class="inline_code">Return</span>-statement consists only of a
        <span class="inline_code">Return</span>-token and a semicolon. If a
        function returns something, there needs to be an expression between a
        <span class="inline_code">Return</span>-token and a semicolon, the
        result of which the function will return to its caller. If the control
        flow of a function that returns something reaches the
        <span class="inline_code">EndFunction</span>-token, the function returns
        0 (in sharp contrast with both C-like languages, where such a function
        returns an undefined value, and Rust, where such a function returns a
        value of last expression in it). There have been a few examples of
        functions in this specification. Arguments to functions may have default
        values, specified as follows (excerpt from Empty Function Test):
        <pre>
Function empty_function(Character charArgument:='A',
                        Integer16 shortArgument:=4096,
                        Integer32 intArgument:=32768,
                        Integer64 longArgument:=8*exp(9*log(10)),
                        Decimal32 floatArgument:=22/7,
                        Decimal64 doubleArgument:=pi)
         Which Returns Nothing Does
    //It does nothing, but the compiler should still generate valid code.
EndFunction</pre
        >
        Now, if you call such a function with fewer than 6 arguments, the
        compiler will not complain, but will supply the rest with default
        values. Note that this will not work when calling an AEC function from
        JavaScript. SmallBasic, the first programming language I learned, back
        when I was 9 years old, from the now-shut-down
        <a
          href="https://web.archive.org/web/20100421060226/http://www.enter.bug.hr/"
          >Croatian website about computers called Enter</a
        >, and I mentioned it in the <a href="#Introduction">introduction</a>,
        does not support arguments for user-made functions at all, because, as
        it says, &quot;<i
          >What do you need function arguments for when all variables are
          global?</i
        >&quot;. I think that is not a good idea, because all variables being
        global and there being no function arguments makes it significantly
        harder to implement recursive functions, and that was one of the
        problems I faced it when making my Labyrinth game (also mentioned in the
        introduction) in it. I solved it by storing what should be local
        variables on global stacks (which SmallBasic standard library includes).
        <del
          >AEC doesn't support function hoisting nor circularly dependent
          functions, for the simple reason that there is no obvious way to
          implement them in WebAssembly.</del
        >
        <i
          >(UPDATE: C++-style forward function declarations have been
          implemented, as there is a relatively simple way to do it using
          WebAssembly Binary Toolkit, the assembler takes care of that for you.
          The syntax is the same as for declaring external functions, except
          that you replace <span class="inline_code">External</span> with
          <span class="inline_code">Declared</span>.)</i
        ><br />
        <b>TODO</b>: Find a way to implement
        <del>circularly dependent functions</del>, and, if possible, function
        hoisting. Also, implement function pointers. Function pointers will
        allow for an easy-to-implement object-oriented programming (structures
        containing function pointers, often used in the Linux kernel instead of
        classes). Mozilla Developer Network recommends function pointers to be
        implemented in compilers using
        <a
          href="https://developer.mozilla.org/en-US/docs/WebAssembly/Understanding_the_text_format#webassembly_tables"
          >WebAssembly Tables</a
        >.
        <del
          >Named function arguments (using, for example, the
          <span class="inline_code">:=</span> operator) might also come useful
          (in languages with them, there is basically no need for the abstract
          builders and directors).</del
        ><br />
        <b id="namedArguments">UPDATE</b> on 26/08/2021: I have implemented
        named function arguments, as illustrated by the
        <a href="namedArgumentsTest.aec.html">Named Arguments Test</a>:
        <pre>
// Should return 0.
Function namedArgumentsTest() Which Returns Integer32 Does
  InstantiateStructure QuadraticEquationSolution solution[1 * 2 * 3];
  solveQuadraticEquation(a := 1 , b := -1, c := -1, AddressOf(solution[0]));
  // Since 'a' is set to default to 1 in the declaration of the
  // "solveQuadraticEquation" function, it does not need to be written
  // if it is indeed 1 when calling that function. In the next line, it is not.
  solveQuadraticEquation(c := -1, b := -1, solution := AddressOf(solution[1]));
  solveQuadraticEquation(b := -1, c := -1, solution := AddressOf(solution[2]));
  solveQuadraticEquation(b := -1, c := -1, a := 1 , AddressOf(solution[3]));
  solveQuadraticEquation(c := -1, a := 1 , b := -1, AddressOf(solution[4]));
  solveQuadraticEquation(c := -1, b := -1, solution := AddressOf(solution[5]));
  Integer32 iterator := 0;
  While iterator &lt; 1*2*3 - 1 Loop
    If not(areStructuresEqual(AddressOf(solution[iterator]),
                              AddressOf(solution[iterator + 1]),
                              SizeOf(QuadraticEquationSolution))) Then
      Return iterator + 1;
    EndIf
    iterator += 1;
  EndWhile
  iterator := 0;
  // Let's test whether structure comparisons work...
  While iterator &lt; 1*2*3 - 1 Loop
    If not(solution[iterator] = solution[iterator + 1]) Then
      Return iterator + 7;
    EndIf
    iterator += 1;
  EndWhile
  iterator := 0;
  While iterator &lt; 1*2*3 - 1 Loop /*
                                   * This loop should have no effect,
                                   * but the compiler must not crash
                                   * when compiling it.
                                   */
    solution[iterator] := solution[iterator + 1];
    iterator += 1;
  EndWhile
  If not(solution[0].firstSolution.imaginary = 0 and
         solution[0].secondSolution.imaginary = 0 and
         abs(solution[0].firstSolution.real + goldenRatio - 1) &lt; epsilon and
         abs(solution[0].secondSolution.real - goldenRatio) &lt; epsilon) Then
    printFloat32(solution[0].firstSolution.real);
    printFloat32(solution[0].firstSolution.imaginary);
    printFloat32(solution[0].secondSolution.real);
    printFloat32(solution[0].secondSolution.imaginary);
    Return 15;
  EndIf
  Return 0;
EndFunction</pre
        >
        So, named function arguments are using the
        <span class="inline_code">:=</span> operator, the same as the
        assignment. I think that makes a lot of sense. I have made a
        <a
          href="https://www.reddit.com/r/ProgrammingLanguages/comments/pcixm4/i_have_added_named_function_parameters_to_my/"
          >Reddit thread</a
        >
        about it, as well as a
        <a
          href="https://www.quora.com/Why-do-Python-and-C-allow-positional-function-parameters-before-named-function-parameters-named-arguments-but-not-after-them-My-programming-language-AECforWebAssembly-allows-both"
          >Quora question</a
        >
        about it. On Quora, I also asked why Python and C# allow positional
        function parameters before named function parameters but not after them,
        while my programming language allows both and the compiler just
        <a
          href="https://github.com/FlatAssembler/AECforWebAssembly/blob/f6369e90551b5da49d7b2ea2e62d6c01ae99f596/compiler.cpp#L1327"
          >issues a warning</a
        >
        in case an argument has been overwritten.
        <br />
        <br /><b id="Structures">Structures</b><br />
        The parser can parse structure declarations of the form:
        <pre>
Structure Point Consists Of
    Decimal32 x,y,z;
    Integer16 number_of_dimensions;
EndStructure</pre
        >
        <del
          >However, the compiler crashes if you insert them in a real program
          (rather than just in a parser test).</del
        >
        Structures are supposed to be instantiated using a directive called
        <span class="inline_code">InstantiateStructure</span>, that is, an
        <span class="inline_code">InstantiateStructure</span> token followed by
        the structure name followed by the variable name (and the variable will
        be of type represented by the structure name).<br />
        <b>TODO</b>:
        <del>Implement structures in the compiler, not just in the parser.</del>
        <i
          >(UPDATE on 30/09/2020: Some progress on that has been made, namely,
          local and global structures are now supported
          <del>as long as they are not nested</del>. You can see an example
          program using them
          <a href="structureDeclarationTest.aec.html">here</a>. Structures as
          arguments or return types aren't supported for now, and are unlikely
          to be so in the near future. I've started a
          <a
            href="https://www.reddit.com/r/WebAssembly/comments/j24p4z/how_to_compile_returning_a_structure_from_a/?utm_source=share&utm_medium=web2x&context=3"
          >
            Reddit thread
          </a>
          asking for help with that.<br />
          UPDATE on 16/02/2021: My implementation of the
          <a href="nQueensPuzzle.html">N-Queens Puzzle</a> in AEC uses
          structures.<br />
          UPDATE on 28/04/2021: I have started a
          <a href="https://www.forum.hr/showthread.php?t=1243515"
            >forum thread</a
          >
          to help me with implementing structures as arguments to the
          functions.)</i
        ><br />
        <b>UPDATE</b> on 03/06/2021: It is important to note that the assignment
        operator when used between structures works very differently in AEC and
        C++. I made it so because I found the C++ behaviour very confusing while
        making this compiler, as it
        <a
          href="https://stackoverflow.com/questions/63951270/using-default-copy-constructor-corrupts-a-tree-in-c"
          >appeared to corrupt the Abstract Syntax Tree while compiling</a
        >. Excerpt from
        <a href="structureDeclarationTest.aec.html"
          >Structure Declaration Test</a
        >
        that illustrates the AEC-specific behaviour (the
        <span class="inline_code">spaghetti</span> function returns
        <span class="inline_code">2</span>):
        <pre>
Structure ListNode Consists Of {
  ListNodePointer next;
  Integer32 value;
}
EndStructure;

Function spaghetti() Which Returns Integer32 Does {
  // See the link above, about how C++ behaviour appeared to corrupt the AST.
  // By common sense, this should return 2. By C++ semantics, this should
  // return 3.
  InstantiateStructure ListNode list[3];
  list[0].value : = 1;
  list[1].value : = 2;
  list[2].value : = 3;
  list[0].next : = AddressOf(list[1]);
  list[1].next : = AddressOf(list[2]);
  list[0] : = ValueAt(list[0].next);
  CharacterPointer pointer : = AddressOf(list[0]);
  Return ValueAt(ListNodePointer(pointer)).value;
}
EndFunction;
	</pre
        >
        The assembly code that the AEC compiler produces for structure
        assignments is slower than one produced by C++ compilers, but, in my
        opinion, the assembly code by AEC behaves way more intuitively in cases
        like this. I've asked a
        <a
          href="https://www.reddit.com/r/ProgrammingLanguages/comments/10ry9nj/do_you_like_more_how_c_implements_structure/?utm_source=share&utm_medium=web2x&context=3"
          >Reddit question</a
        >
        about that.<br />
        <b>UPDATE</b> on 28/08/2021: There <del>is</del> was a weird bug in my
        compiler causing internal compiler errors in case somebody tries to
        instantiate an array of nested structures inside a function. I have
        found it while writing the
        <a href="namedArgumentsTest.aec.html">Named Arguments Test</a>. There is
        a simple work-around <del>for now</del> for AECforWebAssembly versions
        v1.6.2 and older: declare that array globally.
        <pre>
Structure ComplexNumber Consists Of
  Decimal32 real, imaginary;
EndStructure

Structure QuadraticEquationSolution Consists Of
  ComplexNumber firstSolution, secondSolution;
EndStructure

InstantiateStructure QuadraticEquationSolution solution[1 * 2 * 3];
/*
 * TODO: Figure out why the compiler crashes if `solution` is made to be a
 *       local variable. I suppose it has something to do with the fact that
 *       it is an array of nested structures.
 */
</pre
        >
        <b>UPDATE</b> on 31/08/2021: I have found a
        <a
          href="https://github.com/FlatAssembler/AECforWebAssembly/commit/8747e0ef33238ab3a598e187da6c0b490bafbc31"
          >relatively simple fix</a
        >.
        <br />
        <br /><b id="Assembly">Inline assembly</b><br />
        AEC for x86 passes everything between the
        <span class="inline_code">AsmStart</span> and
        <span class="inline_code">AsmEnd</span> token unchanged to the
        assembler. AEC for WebAssembly has keywords
        <span class="inline_code">asm(</span>,
        <span class="inline_code">asm_i32(</span>,
        <span class="inline_code">asm_i64(</span>,
        <span class="inline_code">asm_f32(</span> and
        <span class="inline_code">asm_f64(</span> which expect a compile-time
        constant string as an argument which the compiler will process (for
        example, replace <span class="inline_code">\n</span> with a literal
        new-line character and <span class="inline_code">\\</span> with
        <span class="inline_code">\</span>...) and pass it to the assembler.
        <span class="inline_code">asm(</span> assumes that nothing will be left
        on the system stack by the inline assembly code, while other ones assume
        that a certain WebAssembly type (corresponding to some AEC type) will be
        left on the system stack by it, which they will then fetch. Since
        WebAssembly type <span class="inline_code">i32</span> corresponds to AEC
        <span class="inline_code">Integer32</span> and pointers, we can write
        something like this (excerpt from HybridSort):
        <pre>
//Napravimo sada omotnicu oko WebAssemblerske naredbe "memory.grow"...
Function zauzmi_memorijske_stranice(Integer32 broj_stranica) Which Returns
    CharacterPointer Does
    Integer32 nova_adresa_u_stranicama :=
        asm_i32 //"asm_i32" ka&#382;e compileru da umetne asemblerski kod, i da
                //pretpostavi da &#263;e se nakon njega na sistemskom stogu
                //nalaziti vrijednost tipa "i32". To o&#269;ito nije to&#269;no ako
                //netko prebaci JavaScript virtualnu ma&#353;inu u 64-bitni
                //na&#269;in rada, ali nadam se da to nitko ne&#263;e napraviti.
                //Vjerojatnost da &#263;e JavaScript virtualnoj ma&#353;ini trebati
                //vi&#353;e nego 4GB RAM-a je zanemariva, a vjerojatnost da &#263;e
                //se neki korisni programi sru&#353;iti zbog prebacivanja u
                //64-bitni na&#269;in rada nije ba&#353; zanemariva.
                ("(memory.grow\n"
                "\t(local.get 0)\n" //Prvi (nulti) argument funkcije,
                                    //"brojStranica".
                ")\n");
    If nova_adresa_u_stranicama = -1 Then //Ako nema vi&#353;e
                                          //slobodne memorije...
        Return -1;
    EndIf
    Return nova_adresa_u_stranicama * 64 * 1024; //Na JavaScript Virtualnoj
                                                 //Ma&#353;ini, jedna stranica
                                                 //(page) iznosi 64 KB.
EndFunction</pre
        >
        Remember that string tokens put next to each other are concatenated by
        the tokenizer into one string token. Or, in newer versions of the
        AEC-to-WebAssembly compiler, you can use
        <a href="#multiline_strings">multiline strings</a>, in fact, that's what
        I recommend for inline assembly. When writing inline assembly in C or
        C++, it has bothered me why I cannot write something like
        <span class="inline_code"
          >return asm("#Assembly language expression");</span
        >, and instead I have to write
        <span class="inline_code"
          >asm("#Store an expression into 'variable'"); return variable;</span
        >. Well, in the WebAssembly dialect of AEC, you can indeed write
        something like (an excerpt from
        <a href="analogClock.html">Analog Clock</a>):
        <pre>
Function sqrt(Decimal32 x) Which Returns Decimal32 Does {
  If USE_WEBASSEMBLY_SQRT_INSTRUCTION Then {
    Return asm_f32(
        R"multiline((f32.sqrt
	(local.get 0)
))multiline");
  }
  EndIf;</pre
        >
        <del
          ><b>TODO</b>: Implement a GCC-and-CLANG-style inline assembly, where
          you can access variables from assembly by their names (rather than
          having to manually calculate their memory addresses).</del
        ><br />
        <b>UPDATE</b> on 15/02/2023: I have implemented that you can access
        variables from inline assembly by their names, by inserting the
        <span class="inline_code">%</span> character and then the name of a
        variable. So, no need to add additional arguments to
        <span class="inline_code">asm</span> in order to use variables from
        inline assembly, like you do in CLANG or GCC. I realize there are
        benefits to what CLANG and GCC are doing, but it's both more difficult
        to implement in the compiler and more difficult to use. So, the code
        above has been changed to this:
        <pre>
Function sqrt(Decimal32 x) Which Returns Decimal32 Does {
  If USE_WEBASSEMBLY_SQRT_INSTRUCTION Then {
    Return asm_f32(
        R"multiline((f32.sqrt
	(f32.load
		%x ;;The compiler will replace "%x" with assembly code representing a pointer to the variable "x".
	)
))multiline");
  }
  EndIf;</pre
        >
        In order to enable modifying the variables from inline assembly, the
        compiler will not insert assembly code loading that variable, but
        assembly code representing a pointer to that variable. In this case, it
        makes the inline assembly slightly more complicated, but, in many other
        cases, it will make it a lot simpler. In case you need to insert the
        actual <span class="inline_code">%</span> character inside inline
        assembly (which I think you never have to in the WebAssembly Text
        Format), simply write <span class="inline_code">%%</span>. Due to the
        way the AEC-to-WebAssembly compiler is structured internally (and I
        still wouldn't know how to do it better), this feature of refering to
        variables from inline assembly is not available if the inline assembly
        is in the global scope (outside of a function), and the compiler issues
        <a
          href="https://github.com/FlatAssembler/AECforWebAssembly/blob/65febb8f2c246bdd2789c1ff68bcd5fc88a81a10/TreeRootNode.cpp#L700"
          >a warning</a
        >
        if you try to do that. I have made a
        <a
          href="https://www.reddit.com/r/ProgrammingLanguages/comments/1135wvl/how_did_you_implement_inline_assembly_in_your/?utm_source=share&utm_medium=web2x&context=3"
          >Reddit thread about how to best implement inline assembly in your
          programming language</a
        >, as well as a
        <a href="https://langdev.stackexchange.com/q/1715/330"
          >StackExchange thread about it</a
        >.<br />
        <br /><b id="Builtin">Built-in functions</b><br />
        AEC for x86 has many built-in functions, wrappers around x86 assembly
        instructions. These are: <span class="inline_code">sin(</span>,
        <span class="inline_code">cos(</span>,
        <span class="inline_code">tan(</span>,
        <span class="inline_code">atan2(</span>,
        <span class="inline_code">arctan(</span>,
        <span class="inline_code">ctg(</span>,
        <span class="inline_code">arcctg(</span>,
        <span class="inline_code">sqrt(</span>,
        <span class="inline_code">arcsin(</span>,
        <span class="inline_code">arccos(</span>,
        <span class="inline_code">ln(</span> (natural logarithm),
        <span class="inline_code">log(</span> (base-10 logarithm),
        <span class="inline_code">exp(</span> (returns the Euler number to the
        power of the argument), <span class="inline_code">pow(</span> (which,
        unfortunately, due to the limitations of mathematical functions built
        into x86 assembly, causes an error whenever the first argument is
        negative or zero, and there does not appear to be a simple solution),
        <span class="inline_code">abs(</span> and
        <span class="inline_code">mod(</span> (floating-point modulo). Unlike in
        most programming languages, trigonometric functions expect arguments in
        degrees (not radians, as in C, C++ or JavaScript). Similarly, the
        cyclometric functions such as <span class="inline_code">atan2(</span>
        return the result in degrees, rather than in radians. If you want to use
        them in AEC for WebAssembly, you can write them yourself, like this
        (excerpt from the Analog Clock):
        <pre>
Function sin(Decimal32 degrees) Which Returns Decimal32 Does
    If degrees&lt;0 Then
        Return -sin(-degrees);
    EndIf
    If degrees&gt;90 Then
        Decimal32 sinOfDegreesMinus90 := sin(degrees - 90);
        If fmod(degrees, 360) &lt; 180 Then
            Return sqrt(1 - sinOfDegreesMinus90 * sinOfDegreesMinus90);
        Else
            Return -sqrt(1 - sinOfDegreesMinus90 * sinOfDegreesMinus90);
        EndIf
    EndIf
    /*
     * Sine and cosine are defined in Mathematics 2 using the system of
     * equations (Cauchy system):
     *
     * sin(0)=0
     * cos(0)=1
     * sin'(x)=cos(x)
     * cos'(x)=-sin(x)
     * ---------------
     *
     * Let's translate that as literally as possible to the programming
     * language.
     */
    Decimal32 radians := degrees / oneRadianInDegrees,
              tmpsin  := 0,
              tmpcos  := 1,
              epsilon := radians / PRECISION,
              i       := 0;
    While (epsilon&gt;0 and i&lt;radians) or (epsilon&lt;0 and i&gt;radians) Loop
        tmpsin := tmpsin + epsilon * tmpcos;
        tmpcos := tmpcos - epsilon * tmpsin;
        i      :=               i + epsilon;
    EndWhile
    Return tmpsin;
EndFunction</pre
        >
        Or, you may use the Taylor Series. But I think this obeys the KISS (keep
        it simple, stupid) principle better. Note that you can't call the
        JavaScript <span class="inline_code">Math.sin</span> and similar
        functions, because they are methods of the
        <span class="inline_code">Math</span> singleton, and there is no
        standardized way to call methods of JavaScript objects from WebAssembly
        (for a good reason).<br />
        <b>TODO</b>: Build some mathematical functions into AEC for
        WebAssembly.<br />
        <b>UPDATE</b> on 25/07/2021: If you just want to use the square root
        function in AEC for WebAssembly, you can simply invoke the
        <span class="inline_code">f64.sqrt</span> or
        <span class="inline_code">f32.sqrt</span> in inline assembly. It is not
        recommended to do it because it is supposedly slow (it calculates the
        square root to maximal possible precision, when usually you just need
        the first few decimal digits; it was specified in WebAssembly
        specification only to obey the IEEE754 standard which requires it), but,
        in the new version of Analog Clock program, I find it fast enough. Here
        is how the square root function is implemented in the Analog Clock
        program:
        <pre>
Function sqrt(Decimal32 x) Which Returns Decimal32 Does {
  If USE_WEBASSEMBLY_SQRT_INSTRUCTION Then {
    Return asm_f32("(f32.sqrt\n"
                   "\t(local.get 0)\n"
                   ")");
  }
  EndIf;
  // Binary Search Algorithm...
  Decimal32 max
      : = 80 * 80 + 24 * 24, // This function will be used for calculating the
                             // Euclidean distance between cells in the display
                             // grid, and there will be 80x24 cells.
      min : = 0, i : = (min + max) / 2;
  If(max * max &lt; x) Then // Shouldn't happen, but let's deal with that anyway.
  {
    Return exp(
        ln(x) /
        2); // Much less precise (and probably slower) than binary search.
  }
  EndIf;
  While((max - min) > 1 / PRECISION) Loop {
    If(i * i > x) Then {
      max /*
           * ClangFormat apparently misinterprets the assignment operator ":="
           * as the C label marker ':' followed by the C '=' operator,
           * there doesn't appear to be a simple solution to this problem.
           */
          : = i;
    }
    Else {
    min:
      = i;
    }
    EndIf;
  i:
    = (max + min) / 2;
  }
  EndWhile;
  Return i;
}
EndFunction;
        </pre>
        <b>UPDATE</b> on 20/02/2022: Here is how I implemented the
        <a href="https://en.wikipedia.org/wiki/Atan2"
          ><span class="inline_code">atan2</span> function</a
        >
        (which is often useful in programming), also an excerpt from Analog
        Clock:
        <pre>
Decimal32 oneRadianInDegrees
    : = 180 / pi; //"180/pi" is a compile-time decimal
                  // constant (since we are assigning an
                  // initial value to a global variable),
                  // and, as such, we can use "pi" to
                  // refer to M_PI from the C library,
                  // it's available to the compiler.

Function arctan(Decimal32 x) Which Returns Decimal32 Does {
  // Arcus tangens is equal to the integral of 1/(1+x^2), highschool math.
  Decimal32 sum : = 0, epsilon : = x / PRECISION, i : = 0;
  While(i < x) Loop {
    sum += epsilon / (1 + i * i);
    i += epsilon;
  }
  EndWhile;
  Return(sum * oneRadianInDegrees);
}
EndFunction;

Function atan2(Decimal32 y, Decimal32 x) Which Returns Decimal32 Does {
  If(y = 0) Then {
    If(x < 0) Then { Return 180; }
    Else { Return 0; }
    EndIf;
  }
  ElseIf(x = 0) Then {
    If y < 0 Then { Return 270; }
    Else { Return 90; }
    EndIf;
  }
  Else {
    If(x > 0 and y > 0) Then { Return arctan(y / x); }
    ElseIf(x < 0 and y > 0) Then { Return 90 + arctan(-x / y); }
    ElseIf(x < 0 and y < 0) Then { Return 180 + arctan(y / x); }
    Else { Return 270 + arctan(-x / y); }
    EndIf;
  }
  EndIf;
}
EndFunction;</pre
        >
        <br /><b id="String">String manipulation</b><br />
        AEC for x86 doesn't support string manipulation at all, it doesn't have
        a character type. AEC for WebAssembly is about as good at C manipulation
        as C is without a C library (like when doing operating system
        development). There are no built-in string-manipulation functions, but
        one can easily write them oneself, like this (excerpt from
        <a href="dragonCurve.html">Dragon Curve</a>):
        <pre>
//Again, we need to implement string manipulation functions. Like I've said,
//even though this program will be running on JavaScript Virtual Machine, it
//can't call the methods of the JavaScript "String" class.
Function strlen(CharacterPointer str) Which Returns Integer32 Does
    //We can't implement this recursively, like we did in earlier AEC
    //programs, because we will be dealing with large strings which will
    //cause stack overflow.
    Integer32 length := 0;
    While ValueAt(str + length) Loop
        length := length + 1;
    EndWhile
    Return length;
EndFunction

Function strcpy(CharacterPointer dest,
                CharacterPointer src) Which Returns Nothing Does
    While ValueAt(src) Loop
        ValueAt(dest) := ValueAt(src);
        dest          :=     dest + 1;
        src           :=      src + 1;
    EndWhile
    ValueAt(dest) := 0;
EndFunction

Function reverseString(CharacterPointer string) Which Returns Nothing Does
    CharacterPointer pointerToLastCharacter := string + strlen(string) - 1;
    While pointerToLastCharacter - string &gt; 0 Loop
        Character tmp                   := ValueAt(string);
        ValueAt(string)                 := ValueAt(pointerToLastCharacter);
        ValueAt(pointerToLastCharacter) := tmp;
        string                          := string + 1;
        pointerToLastCharacter          := pointerToLastCharacter - 1;
    EndWhile
EndFunction

Function strcat(CharacterPointer dest,
                CharacterPointer src) Which Returns Nothing Does
    strcpy(dest + strlen(dest), src);
EndFunction

Function convertIntegerToString(CharacterPointer string,
                                Integer32 number)
    Which Returns Integer32 Does //Returns the length of the string.
    Integer32 isNumberNegative := 0;
    If number &lt; 0 Then
        number           := -number;
        isNumberNegative :=       1;
    EndIf
    Integer32 i := 0;
    While number &gt; 9 Loop
        ValueAt(string + i) := '0' + mod(number, 10);
        number              :=           number / 10;
        i                   :=                 i + 1;
    EndWhile
    ValueAt(string + i) := '0' + number;
    i                   :=        i + 1;
    If isNumberNegative Then
        ValueAt(string + i) :=   '-';
        i                   := i + 1;
    EndIf
    ValueAt(string + i) := 0;
    reverseString(string);
    Return i;
EndFunction</pre
        >
        To delete a character from a string, you can use the following function
        from the
        <a
          href="https://github.com/FlatAssembler/AECforWebAssembly/tree/master/HavlikLaw"
          >Havlik's Law</a
        >:
        <pre>
Function izbrisi_znak_iz_stringa(CharacterPointer mjesto_u_stringu)
         Which Returns Nothing Does
               While ValueAt(mjesto_u_stringu) Loop
                     ValueAt(mjesto_u_stringu) :=
                                               ValueAt(
                                                mjesto_u_stringu + 1
                                                );
                     mjesto_u_stringu += 1;
               EndWhile
EndFunction
	  </pre
        >
        <b>TODO</b>: Build some useful string manipulation into AEC, at least
        ones for converting numbers to strings and vice versa.<br />
        <br /><b id="AdvancedArray">Advanced array manipulation</b><br />
        When it comes to sorting arrays, I've tried to efficiently implement the
        <a href="HybridSort.aec.html">HybridSort</a> (a sorting algorithm I came
        up with, a mixture of MergeSort, QuickSort and SelectionSort) algorithm
        in AEC. HybridSort sorting algorithm is based on the fact that the
        number of comparisons done by MergeSort depends only on the size of the
        array, and is always equal to
        <div class="formula">2&middot;n&middot;log<sub>2</sub>(n)</div>
        , where <i>n</i> is the length of the array, while QuickSort is faster
        more shuffled the array is and is slowest for already-sorted and
        inverse-sorted arrays. So, sometimes QuickSort is faster, and sometimes
        MergeSort is faster. Using a simple
        <a
          href="https://github.com/FlatAssembler/ArithmeticExpressionCompiler/tree/master/QuickSort/Genetic_algorithm_for_deriving_the_formula"
          >genetic algorithm</a
        >, I came up with a formula for approximating how many comparisons
        QuickSort will do on a given array. That formula is:
        <div class="formula">
          e<sup
            >(ln(n) + ln(ln(n))) &middot; 1.05 + (ln(n) - ln(ln(n)) - ln(2))
            &middot; 0.9163 &middot; |2.38854 &middot; s<sup>7</sup> - 0.284258
            &middot; s<sup>6</sup> - 1.87104 &middot; s<sup>5</sup> + 0.372637
            &middot; s<sup>4</sup> + 0.167242 &middot; s<sup>3</sup> - 0.0884977
            &middot; s<sup>2</sup> + 0.315119 &middot; s|</sup
          >
        </div>
        , where <i>s</i> is the sortedness of the array (-1 when the array is
        inverse-sorted, 1 when it is sorted, around 0 when it is randomly
        shuffled), and <i>ln</i> being the natural logarithm, base
        <i>e = 2.718...</i>. I am not sure how to test how correct that
        approximation is. My algorithm is recursive, and for every iteration of
        the recursion, it estimates whether it should behave like QuickSort or
        like MergeSort based on those formulas. In case the array is very small,
        so that SelectionSort is faster than both QuickSort and MergeSort, or in
        case it runs of stack memory, it runs SelectionSort. However, for some
        reason, my algorithm is significantly slower than JavaScript
        <span class="inline_code">Array.sort</span> method:<br /><br />
        <img
          src="https://github.com/FlatAssembler/AECforWebAssembly/raw/master/HybridSort/rezultati_mjerenja.jpg"
          style="
            max-width: 100%;
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 10px;
            display: block;
          "
          alt="Results of the measurements"
        />
        I am not sure what causes those <i>stairs</i> in the measurement
        results. Professor Alfonzo Baumgartner thinks it has to do with cache
        misses, here is what he wrote when I asked him about that in an e-mail:
        <div class="quotation" lang="hr">
          Po&#353;tovani,<br />
          obja&#353;njenje koje ja nudim za te 'stepenice' je u &#269;injenici
          da svi procesori koriste cache memoriju u koje spremaju odre&#273;eni
          broj memorijskih stranica.<br />
          Ako uzmemo da je jedna memorijska stranica npr. 64K, onda, &#269;im se
          na&#353; niz pove&#263;a samo za 1 element vi&#353;e od 64K, potrebne
          su dvije memorijske stranice. &#268;im se na&#353; niz prostire na
          dvije memorijske stranice, odmah je mogu&#263;nost tzv. 'cache
          miss'-ova kada procesor ne&#263;e prona&#263;i u svome L1 cache-u tu
          stranicu pa mora do&#263;i do zamjene stranica unutar cache, &#353;to
          usporava izvo&#273;enje programa.<br />

          Kako Vi pove&#263;avate niz, tako se koristi sve vi&#353;e memorijskih
          stranica u kojima je on zapisan, a sam cache-ing sistem onda ima
          vi&#353;e posla oko njihovih zamjena.
          <br />
          Zato se za neke duljine nizova dobiva skoro isti rezultat, a onda
          &#269;im pove&#263;amo samo za jedan podatak (koji ide u novu mem.
          stranicu) dobijemo 'drasti&#269;no' uve&#263;an rezultat mjerenja.
          <br />
          Ne znam jeste li me shvatili i nisam siguran 100% da je to kod Vas
          uzrok tih 'stepenica', ali na prvi pogled mi se &#269;ini takvo
          ne&#353;to..
          <br />
          Alfonzo.
        </div>
        In any case, I think this is an interesting result worth of further
        exploration. Which sorting algorithms have those <i>stairs</i> when
        measured? Why do some do, and some (like JavaScript
        <span class="inline_code">Array.sort</span>) do not, on the same array?
        <br />
        <br />
        <b id="DifferencesInDialects">Example program in both dialects of AEC</b
        ><br />
        So, here is an example piece of code in the x86 dialect of AEC:
        <pre>
i := 0
While i < n | i = n
	If i = 0
		fib(i) := 0
	ElseIf i = 1
		fib(i) := 1
	Else
		fib(i) := fib(i - 1) + fib(i - 2)
	EndIf
	i := i + 1
EndWhile
fib(n)</pre
        >
        And here is its near-equivalent in the WebAssembly dialect of AEC:
        <pre>
Function fib(Integer16 n) Which Returns Decimal64 Does
  Integer16 i := 0;
  Decimal64 fib[100];
  While i < n or i = n Loop
     If i = 0 Then
       fib[i] := 0;
     ElseIf i = 1 Then
       fib[i] := 1;
     Else
       fib[i] := fib[i - 1] + fib[i - 2];
     EndIf
     i += 1;
  EndWhile
  Return fib[n];
EndFunction</pre
        >
        You can read slightly more about it at the beginning of the
        <a href="https://github.com/FlatAssembler/AECforWebAssembly#limitations"
          >Limitations section of the README</a
        >. <br /><br /><b id="Conclusion">Conclusion</b><br />
        I think AEC is a promising project, but a lot of work is still needed to
        make it successful. I don't think I can do everything that's needed for
        it to be successful by myself. (<i
          >UPDATE on 06/06/2021: It would, for example, be useful to make a
          web-based IDE for the AEC-to-WebAssembly compiler, so that somebody
          can try my programming language directly in the browser. I have opened
          a
          <a
            href="https://www.quora.com/Can-I-make-the-compiler-for-my-programming-language-run-in-a-browser-it-already-runs-in-NodeJS-if-compiled-with-EMSCRIPTEN-so-that-somebody-can-try-my-programming-language-directly-in-browser-My-compiler-can-output"
            >Quora question</a
          >
          asking for advice about how to do that. We would need to get the
          AEC-to-WebAssembly compiler, which can already run in NodeJS if
          compiled with EMSCRIPTEN, to run in a browser, and, to be honest, I do
          not know enough WebAssembly to do that by myself. Actually, I think
          almost no web-developer these days has the knowledge needed to make
          that. We would also need to embed the
          <span class="inline_code">wat2wasm</span> from WebAssembly Binary
          Toolkit to run in that web-app, as my compiler relies on it to convert
          the WebAssembly assembly language it outputs to the bytecode that
          browsers understand. Somebody has already made
          <a href="https://webassembly.github.io/wabt/demo/wat2wasm/"
            ><span class="inline_code">wat2wasm</span> run in modern browsers</a
          >, but they, apparently, left no instructions how they managed to do
          that.</i
        >). <br /><br />
        <b>UPDATE</b> on 16/10/2020: I've published a
        <a href="https://youtu.be/YFZ-45ea5mo">YouTube video</a>
        about programming in your programming languages for the client-side web.
        If you have trouble playing it, you can download the
        <a href="AECforWebAssembly.mp4">minified MP4</a> and try opening it in
        VLC or a similar program. If nothing else works, try opening the
        <a href="AECforWebAssembly.zip">ZIP file</a> with a PDF, an ODP and a
        PPT file.<br /><br />
        <b>UPDATE</b> on 18/02/2022: In case you are interested, here is
        <a
          href="https://discord.com/channels/172018499005317120/172018499005317120/808411597450117121"
          >what <span id="stuxxnet">Stuxxnet</span>, the moderator of a Discord
          server about programming, has to say about my programming language</a
        >:
        <div class="quotation">
          <div class="quotation">
            Come on now, I have written a programming language that compiles to
            WebAssembly, I know that stuff [about WebAssembly].
          </div>
          you've also written a log function that runs in an infinite loop if
          the input is close to 1<br />
          you're trying to compare sort functions written in an interpreted
          language to those provided by that language in its native VM<br />
          you're overfitting measurement data to come up with a completely
          insane formula for the comparisons of quicksort<br />
          you're using rand in c++ code<br />
          you implement custom math functions using highschool maths that just
          doesn't work if you want to be numerically efficient or just even get
          a sane result for the whole range of possible inputs.<br />
          I'm sorry, but I really don't have much confidence in your judgement
          calls...
        </div>
        A StackExchange user called G. Sliepen also has a
        <a href="https://codereview.stackexchange.com/a/277104/219010"
          >lot of negative comments</a
        >
        about the way I structured my compiler.<br />
        I once learned that a Serbian company called RT-RK, that also has an
        office in Osijek, where I was living at the time, was searching for a
        compiler developer. So I sent them via e-mail the AEC-to-WebAssembly
        compiler on GitHub, to finally get an entry-level job, after I had been
        learning to program for 8 years. They did not even invite me for an
        interview. They responded me in an e-mail that they are searching for
        somebody who knows in details how GCC or LLVM, preferably both, work
        internally, and that my project does not show them that I know that.<br />
        <br />
        <b>UPDATE</b> on 05/01/2023: A question I often get asked on Internet
        forums is, if I have made my programming language, why haven't I also
        made my own operating system? The answer is fairly simple: While I do
        have some ideas about what a good programming language would look like
        and work internally (as you can probably tell by reading the
        documentation of my programming language), I have no idea what a good
        operating system would work like. So, I haven't made my own operating
        system, and I probably never will.
      </div>
      <script type="text/javascript">
        function highlightedToken(token) {
          if (token == "<") token = "&lt;";
          if (token == ">") token = "&gt;";
          if (token.substr(0, 2) == "//" || token.substr(0, 2) == "/*")
            return '<span class="Comment">' + token + "</span>";
          if (token.charAt(0) == '"' || token.charAt(0) == "'")
            return (
              '<span class="String">' +
              token
                .replace(/\\\\/g, "<b>\\<i>\\</i></b>")
                .replace(/\\n/g, "<b>\\<i>n</i></b>")
                .replace(/\\t/g, "<b>\\<i>t</i></b>")
                .replace(/\\\"/g, '<b>\\<i>"</i></b>') +
              "</span>"
            );
          if (token.substr(0, 2) == 'R"')
            return (
              '<span class="String">' +
              token.replace(/\n/g, '</span>\n<span class="String">') +
              "</span>"
            );
          if (
            token == "Character" ||
            token == "CharacterPointer" ||
            token == "Integer16" ||
            token == "Integer16Pointer" ||
            token == "Integer32" ||
            token == "Integer32Pointer" ||
            token == "Integer64" ||
            token == "Integer64Pointer" ||
            token == "Decimal32" ||
            token == "Decimal64" ||
            token == "Decimal32Pointer" ||
            token == "Decimal64Pointer" ||
            token == "CharacterPointerPointer" ||
            token == "DataType" ||
            token == "Nothing" ||
            token == "InstantiateStructure" ||
            /Pointer$/.test(token) ||
            /^PointerTo/.test(token)
          )
            return '<span class="Type">' + token + "</span>";
          if (token.charAt(0) >= "0" && token.charAt(0) <= "9")
            return '<span class="Constant">' + token + "</span>";
          if (
            token == "Function" ||
            token == "Which" ||
            token == "Returns" ||
            token == "Is" ||
            token == "External" ||
            token == "Declared" ||
            token == "Does" ||
            token == "EndFunction" ||
            token == "Return" ||
            token == "If" ||
            token == "ElseIf" ||
            token == "Else" ||
            token == "EndIf" ||
            token == "Then" ||
            token == "While" ||
            token == "EndWhile" ||
            token == "Loop" ||
            token == ";" ||
            token == "Structure" ||
            token == "Consists" ||
            token == "Of" ||
            token == "EndStructure" ||
            token == "asm" ||
            token == "asm_i32" ||
            token == "asm_i64" ||
            token == "asm_f32" ||
            token == "asm_f64"
          )
            return '<span class="Keyword">' + token + "</span>";
          if (
            token == "and" ||
            token == "&" ||
            token == "or" ||
            token == "|" ||
            token == "mod" ||
            token == "AddressOf" ||
            token == "ValueAt" ||
            token == "," ||
            token == "+" ||
            token == "-" ||
            token == "/" ||
            token == "*" ||
            token == "?" ||
            token == ":" ||
            token == "=" ||
            token == "&lt;" ||
            token == "&gt;" ||
            token == "not" ||
            token == "invertBits" ||
            token == "SizeOf"
          )
            return '<span class="Operator">' + token + "</span>";
          if (
            token == "{" ||
            token == "}" ||
            token == "(" ||
            token == ")" ||
            token == "[" ||
            token == "]"
          )
            return '<span class="Parenthesis">' + token + "</span>";
          return token;
        }
        function highlightAEC(sourceCode) {
          var currentToken = "",
            areWeInAString = false,
            areWeInAComment = false,
            howTheCommentStarted,
            howTheStringStarted,
            highlightedCode = "";
          for (var i = 0; i < sourceCode.length; i++) {
            if (
              !areWeInAComment &&
              !areWeInAString &&
              (sourceCode.substr(i, 2) == "//" ||
                sourceCode.substr(i, 2) == "/*")
            ) {
              areWeInAComment = true;
              howTheCommentStarted = sourceCode.substr(i, 2);
              highlightedCode += highlightedToken(currentToken);
              currentToken = howTheCommentStarted;
              i++;
              continue;
            }
            if (
              areWeInAComment &&
              ((howTheCommentStarted == "//" && sourceCode.charAt(i) == "\n") ||
                (howTheCommentStarted == "/*" &&
                  sourceCode.substr(i, 2) == "*/"))
            ) {
              areWeInAComment = false;
              if (howTheCommentStarted == "//") currentToken += "\n";
              else currentToken += "*/";
              if (howTheCommentStarted == "/*") i++;
              highlightedCode += highlightedToken(currentToken);
              currentToken = "";
              continue;
            }
            if (areWeInAComment) {
              currentToken += sourceCode.charAt(i);
              continue;
            }
            if (
              !areWeInAString &&
              (sourceCode.charAt(i) == '"' ||
                sourceCode.charAt(i) == "'" ||
                sourceCode.substr(i, 2) == 'R"')
            ) {
              areWeInAString = true;
              if (sourceCode.substr(i, 2) == 'R"') {
                howTheStringStarted = "";
                var whereIsTheOpenParenthesis = i + 2;
                while (sourceCode.charAt(whereIsTheOpenParenthesis) != "(") {
                  howTheStringStarted += sourceCode.charAt(
                    whereIsTheOpenParenthesis
                  );
                  whereIsTheOpenParenthesis++;
                }
                howTheStringStarted = ")" + howTheStringStarted + '"';
              } else howTheStringStarted = sourceCode.charAt(i);
              highlightedCode += highlightedToken(currentToken);
              currentToken = sourceCode.charAt(i);
              continue;
            }
            if (
              areWeInAString &&
              (currentToken.charAt(currentToken.length - 1) != "\\" ||
                (currentToken.charAt(currentToken.length - 2) == "\\" &&
                  currentToken.charAt(currentToken.length - 3) != "\\")) &&
              sourceCode.substr(i, howTheStringStarted.length) ==
                howTheStringStarted
            ) {
              areWeInAString = false;
              currentToken += howTheStringStarted;
              i += howTheStringStarted.length - 1;
              highlightedCode += highlightedToken(currentToken);
              currentToken = "";
              continue;
            }
            if (areWeInAString) {
              currentToken += sourceCode.charAt(i);
              continue;
            }
            if (
              (sourceCode.charAt(i) >= "0" && sourceCode.charAt(i) <= "9") ||
              (sourceCode.charAt(i) >= "a" && sourceCode.charAt(i) <= "z") ||
              (sourceCode.charAt(i) >= "A" && sourceCode.charAt(i) <= "Z") ||
              sourceCode.charAt(i) == "_" ||
              sourceCode.charAt(i) == "."
            ) {
              currentToken += sourceCode.charAt(i);
              continue;
            }
            highlightedCode +=
              highlightedToken(currentToken) +
              highlightedToken(sourceCode.charAt(i));
            currentToken = "";
          }
          return highlightedCode + highlightedToken(currentToken);
        }
        var preTags = document.getElementsByTagName("pre");
        for (var i = 0; i < preTags.length; i++)
          if (
            !/LinuxShell/.test(preTags[i].className) &&
            !/cxx_program/.test(preTags[i].className)
          )
            preTags[i].innerHTML = highlightAEC(
              preTags[i].innerText.replace(/\r/g, "")
            ).replace(
              /\n/g,
              navigator.appName === "Microsoft Internet Explorer"
                ? "<br/>"
                : "\n"
            );
      </script>
    </main>
    <footer>
      <div
        style="
          width: 25%;
          float: right;
          text-align: left;
          bottom: 30px;
          background: #aaffaa;
        "
      >
        Choose the style:
        <a
          href="#"
          style="color: red"
          onclick="document.getElementById('glavni').setAttribute('class', 'main1')"
          >[1]</a
        >
        <a
          href="#"
          style="color: red"
          onclick="document.getElementById('glavni').setAttribute('class', 'main2')"
          >[2]</a
        >
        <a
          href="#"
          style="color: red"
          onclick="document.getElementById('glavni').setAttribute('class', 'main3')"
          >[3]</a
        >
      </div>
      <div style="background: #aaffaa; float: right; width: 50%">
        Uploaded by Teo Samaržija on 29/08/2020
      </div>
      <svg
        id="donjiLijevi"
        style="float: left; width: 25%; height: 100%; overflow: hidden"
      ></svg>
      <script type="text/javascript">
        if (navigator.appName == "Microsoft Internet Explorer") {
          var niz = document.getElementsByTagName("div");
          for (var i = 0; i < niz.length; i++) {
            if (niz[i].className.indexOf("link1") == -1) continue;
            niz[i].onmouseenter = function () {
              this.children[0].style.display = "inline";
            };
            niz[i].onmouseleave = function () {
              this.children[0].style.display = "none";
            };
          }
          document.getElementById("glavni").removeAttribute("style");
        } else if (navigator.appName == "Opera") {
          document.getElementById("glavni").style.color = "black";
          document.getElementById("glavni").style.backgroundColor = "white";
          var gornjiDesni = document.getElementById("gornjiDesni");
          gornjiDesni.parentNode.removeChild(gornjiDesni);
        } else if (
          (((navigator.userAgent.indexOf("Safari") + 1 ||
            navigator.userAgent.indexOf("WebKit") + 1) &&
            navigator.userAgent.indexOf("Mobile") + 1 &&
            (!(navigator.userAgent.indexOf("Chrome") + 1) ||
              (navigator.userAgent.indexOf("Version") + 1 &&
                navigator.userAgent.indexOf("Chrome") + 1))) ||
            (navigator.userAgent.indexOf("Mobile") + 1 &&
              navigator.userAgent.indexOf("Gecko") + 1 &&
              !(navigator.userAgent.indexOf("like Gecko") + 1) &&
              !(navigator.userAgent.indexOf("Dolfin") + 1))) &&
          !(navigator.userAgent.indexOf("iPad") + 1) &&
          !(navigator.userAgent.indexOf("iPhone") + 1)
        )
          document.getElementById("glavni").style.fontSize = "36px";
        else if (navigator.userAgent.indexOf("Mobi") + 1) {
          document.head.innerHTML +=
            '<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">';
          var niz = document.getElementsByTagName("svg");
          for (var i = 0; i < niz.length; i++) niz[i].style.display = "none";
          document.getElementsByTagName("aside")[0].style.display = "none";
          document.getElementsByTagName("aside")[0].style.float = "none";
          document.getElementsByTagName("aside")[0].style.width = "100%";
          document.getElementsByTagName("aside")[0].style.height = "auto";
          document.getElementsByTagName("aside")[0].style.WebkitAnimationName =
            "none";
          niz = document.getElementsByClassName("popup");
          for (var i = 0; i < niz.length; i++) {
            niz[i].style.width = "50%";
            niz[i].style.left = "45%";
            niz[i].style.maxWidth = "none";
          }
          document.getElementsByTagName("section")[0].style.height = "auto";
          document.getElementsByTagName("section")[0].style.float = "none";
          document.getElementsByTagName("section")[0].style.width = "100%";
          document.getElementsByTagName("header")[0].style.height = "auto";
          document.getElementById("naslov").style.height = "auto";
          document.getElementById("titleContainer").style.transform = "";
          document.getElementsByTagName("header")[0].style.lineHeight =
            "normal";
          document.getElementsByTagName("main")[0].style.width = "100%";
          document.getElementsByTagName("footer")[0].children[0].style.display =
            "inline";
          document.getElementsByTagName("footer")[0].children[0].style.float =
            "none";
          document.getElementsByTagName("footer")[0].children[0].innerHTML +=
            "<br/><br/>";
          document.getElementsByTagName("footer")[0].style.height = "auto";
          document.getElementsByTagName("footer")[0].style.lineHeight =
            "normal";
          document.getElementsByTagName("header")[0].outerHTML +=
            '<button id="showNavigation" style="width:100%;line-height:36px;height:41px;">Show navigation<\/button>';
          document.getElementById("showNavigation").onclick = function () {
            if (
              document.getElementsByTagName("aside")[0].style.display == "none"
            ) {
              this.innerHTML = "Hide navigation";
              document.getElementsByTagName("aside")[0].style.display = "block";
            } else {
              this.innerHTML = "Show navigation";
              document.getElementsByTagName("aside")[0].style.display = "none";
            }
          };
          //                           window.setTimeout(function(){document.body.removeChild(document.body.children[document.body.children.length-1]);},2000);
          document.getElementById("naslov").style.width = "100%";
          document.getElementById("naslov").style.float = "none";
          document.getElementsByTagName("header")[0].style.backgroundColor =
            document.getElementById("naslov").style.backgroundColor;
          document.getElementsByTagName("footer")[0].children[1].style.display =
            "inline";
          document.getElementsByTagName("footer")[0].children[1].style.width =
            "100%";
          document.getElementsByTagName("footer")[0].children[1].style.float =
            "none";
          document.getElementsByTagName("footer")[0].style.backgroundColor =
            document.getElementsByTagName(
              "footer"
            )[0].children[0].style.backgroundColor;
        }
        function footerScript() {
          var crtanje = document.getElementById("donjiLijevi");
          while (crtanje.childNodes.length)
            crtanje.removeChild(crtanje.childNodes[0]);
          var visina = crtanje.clientHeight;
          var sirina = crtanje.clientWidth;
          if (!visina || !sirina) {
            visina = crtanje.parentNode.clientHeight;
            sirina = crtanje.parentNode.clientWidth / 4;
          }
          var elipsa = document.createElementNS(svgNS, "ellipse");
          elipsa.setAttribute("cx", sirina);
          elipsa.setAttribute("cy", 0);
          elipsa.setAttribute("rx", sirina);
          elipsa.setAttribute("ry", visina);
          elipsa.setAttribute("fill", "#aaffaa");
          crtanje.appendChild(elipsa);
          for (var i = 0; i < 30; i++) {
            var kut1 = (270 + i * 3) / 57.3;
            var kut2 = (274 + i * 3) / 57.3;
            var x1 = Math.round(sirina - Math.cos(kut1) * sirina);
            var x2 = Math.round(sirina - Math.cos(kut2) * sirina);
            var y1 = -Math.round(Math.sin(kut1) * visina);
            var y2 = -Math.round(Math.sin(kut2) * visina);
            var trokut = document.createElementNS(svgNS, "polygon");
            trokut.setAttribute(
              "points",
              x1 + "," + y1 + " " + x2 + "," + y2 + " " + sirina + ",0"
            );
            trokut.setAttribute(
              "fill",
              "rgb(170," +
                Math.round(255 - i * 2.83) +
                "," +
                Math.min(Math.round(170 + i * 4), 255) +
                ")"
            );
            crtanje.appendChild(trokut);
          }
        }
        footerScript();
        window.addEventListener("resize", footerScript);
      </script>
    </footer>
  </body>
</html>
